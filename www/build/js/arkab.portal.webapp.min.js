function addDays(a,b){var c=new Date(a);return c.setDate(c.getDate()+b),c}function addMinutes(a,b){return new Date(a.getTime()+6e4*b)}function formatDateToMonthAndYear(a){var b=(6e4*(new Date).getTimezoneOffset(),new Date(a));b=new Date(b.getTime());var c=""+(b.getMonth()+1),d=b.getFullYear();return c.length<2&&(c="0"+c),[c,d].join("/")}function formatDateToString(a){var b=(6e4*(new Date).getTimezoneOffset(),new Date(a));b=new Date(b.getTime());var c=""+(b.getMonth()+1),d=""+b.getDate(),e=b.getFullYear();return c.length<2&&(c="0"+c),d.length<2&&(d="0"+d),[e,c,d].join("-")}function formatDateToPtBr(a){return null==a?null:moment(a).format("DD/MM/YYYY")}function isSameDate(a,b){return a.getFullYear()==b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()}function isToday(a){return a.getFullYear()==(new Date).getFullYear()&&a.getMonth()==(new Date).getMonth()&&a.getDate()==(new Date).getDate()}function formatDateToPtBrNoOffset(a){if(null==a)return null;var b=""+(a.getMonth()+1),c=""+a.getDate(),d=a.getFullYear();return b.length<2&&(b="0"+b),c.length<2&&(c="0"+c),[c,b,d].join("/")}function formatDateTimeToPtBr(a){return a?moment(a).format("DD/MM/YYYY HH:mm"):null}function formatDateTimeToPtBr2(a){var b=new Date(moment.parseZone(a)),c=""+(b.getMonth()+1),d=""+b.getDate(),e=b.getFullYear(),f=b.getHours(),g=b.getMinutes();return c.toString().length<2&&(c="0"+c),d.toString().length<2&&(d="0"+d),f.toString().length<2&&(f="0"+f),g.toString().length<2&&(g="0"+g),[d,c,e].join("/")+" "+[f,g].join(":")}function formatPtBrDate(a){if(null==a)return null;var b=a.substring(0,2),c=a.substring(3,5),d=a.substring(6,10);c.length<2&&(c="0"+c),b.length<2&&(b="0"+b);[d,c,b].join("-")+"T00:00:00-02:00";return moment(a,"DD/MM/YYYY").toDate()}function formatPtBrDateTime(a){var b=a.substring(0,2),c=a.substring(3,5),d=a.substring(6,10),e=a.substring(11,13),f=a.substring(14,16),g="00";c.length<2&&(c="0"+c),b.length<2&&(b="0"+b),e.length<2&&(e="0"+e),f.length<2&&(f="0"+f);var h=[d,c,b].join("-")+"T"+[e,f,g].join(":")+"-02:00",i=moment(h).toDate();return i}function monthName(a){return 1==a?"Jan":2==a?"Fev":3==a?"Mar":4==a?"Abr":5==a?"Mai":6==a?"Jun":7==a?"Jul":8==a?"Ago":9==a?"Set":10==a?"Out":11==a?"Nov":12==a?"Dez":a.toString()}function getFileNameFromHttpResponse(a){var b=a.headers("Content-Disposition"),c=b.split(";")[1].trim().split("=")[1];return c.replace(/"/g,"")}function timeSpanBetweenDates(a,b){var c=b.getTime()-a.getTime(),d=Math.floor(c/864e5);c-=864e5*d;var e=Math.floor(c/36e5);c-=36e5*e;var f=Math.floor(c/6e4);c-=6e4*f;var g=Math.floor(c/1e3);return c-=1e3*g,d+" days, "+e+" hours, "+f+" minutes, "+g+" seconds"}function createGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})}angular.module("arkabPortal",["ngRoute","ngSanitize","ui.bootstrap","angularjs.daterangepicker","luegg.directives","angular.filter","summernote"]);var isCordovaApp=!!window.cordova;angular.module("summernote",[]).controller("SummernoteController",["$scope","$attrs","$timeout",function(a,b,c){"use strict";var d,e=angular.copy(a.summernoteConfig)||{};if(angular.isDefined(b.height)&&(e.height=+b.height),angular.isDefined(b.minHeight)&&(e.minHeight=+b.minHeight),angular.isDefined(b.maxHeight)&&(e.maxHeight=+b.maxHeight),angular.isDefined(b.placeholder)&&(e.placeholder=b.placeholder),angular.isDefined(b.focus)&&(e.focus=!0),angular.isDefined(b.airmode)&&(e.airMode=!0),angular.isDefined(b.dialogsinbody)&&(e.dialogsInBody=!0),angular.isDefined(b.lang)){if(!angular.isDefined($.summernote.lang[b.lang]))throw new Error('"'+b.lang+'" lang file must be exist.');e.lang=b.lang}e.callbacks=e.callbacks||{},angular.isDefined(b.onInit)&&(e.callbacks.onInit=function(b){a.init({evt:b})}),angular.isDefined(b.onEnter)&&(e.callbacks.onEnter=function(b){a.enter({evt:b})}),angular.isDefined(b.onFocus)&&(e.callbacks.onFocus=function(b){a.focus({evt:b})}),angular.isDefined(b.onPaste)&&(e.callbacks.onPaste=function(b){a.paste({evt:b})}),angular.isDefined(b.onKeyup)&&(e.callbacks.onKeyup=function(b){a.keyup({evt:b})}),angular.isDefined(b.onKeydown)&&(e.callbacks.onKeydown=function(b){a.keydown({evt:b})}),angular.isDefined(b.onImageUpload)&&(e.callbacks.onImageUpload=function(b){a.imageUpload({files:b,editable:a.editable})}),angular.isDefined(b.onMediaDelete)&&(e.callbacks.onMediaDelete=function(b){var c={attrs:{}};c.tagName=b[0].tagName,angular.forEach(b[0].attributes,function(a){c.attrs[a.name]=a.value}),a.mediaDelete({target:c})}),this.activate=function(f,g,h){var i=function(){var a=g.summernote("code");g.summernote("isEmpty")&&(a=""),h&&h.$viewValue!==a&&c(function(){h.$setViewValue(a)},0)},j=e.callbacks.onChange;e.callbacks.onChange=function(d){c(function(){g.summernote("isEmpty")&&(d=""),i()},0),angular.isDefined(b.onChange)?a.change({contents:d,editable:a.editable}):angular.isFunction(j)&&j.apply(this,arguments)};var k=e.callbacks.onEnter;e.callbacks.onEnter=function(a){c(function(){i()},0),angular.isFunction(k)&&k.apply(this,arguments)},angular.isDefined(b.onBlur)&&(e.callbacks.onBlur=function(b){!e.airMode&&g.blur(),a.blur({evt:b})}),g.summernote(e);var l,m=g.next(".note-editor");m.find(".note-toolbar").click(function(){i(),m.hasClass("codeview")?(m.on("keyup",i),h&&(l=f.$watch(function(){return h.$modelValue},function(a){m.find(".note-codable").val(a)}))):(m.off("keyup",i),angular.isFunction(l)&&l())}),h&&(h.$render=function(){h.$viewValue?g.summernote("code",h.$viewValue):g.summernote("empty")}),angular.isDefined(b.editable)&&(a.editable=m.find(".note-editable")),angular.isDefined(b.editor)&&(a.editor=g),d=g,g.on("$destroy",function(){g.summernote("destroy"),a.summernoteDestroyed=!0})},a.$on("$destroy",function(){a.summernoteDestroyed||d.summernote("destroy")})}]).directive("summernote",[function(){"use strict";return{restrict:"EA",transclude:"element",replace:!0,require:["summernote","?ngModel"],controller:"SummernoteController",scope:{summernoteConfig:"=config",editable:"=",editor:"=",init:"&onInit",enter:"&onEnter",focus:"&onFocus",blur:"&onBlur",paste:"&onPaste",keyup:"&onKeyup",keydown:"&onKeydown",change:"&onChange",imageUpload:"&onImageUpload",mediaDelete:"&onMediaDelete"},template:'<div class="summernote"></div>',link:function(a,b,c,d,e){var f=d[0],g=d[1];if(g)var h=a.$watch(function(){return g.$viewValue},function(c){h(),b.append(c),f.activate(a,b,g)},!0);else e(a,function(a,c){b.append(a.html())}),f.activate(a,b,g)}}}]),angular.module("arkabPortal").directive("akbTitle",function(){return{restrict:"E",template:'<h4 style="margin: 0px;">{{pageTitle}} <small>{{pageSubtitle}}</small></h4>',link:function(a,b,c){a.pageTitle=c.pageTitle,a.pageSubtitle=c.pageSubtitle}}}),angular.module("arkabPortal").directive("akbServerLoading",function(){return{restrict:"E",template:'<h3 style="margin: 0px; padding: 0px;"><kbd><span class="fa fa-cog fa-spin fa-fw" aria-hidden="true"></span>Processando, aguarde...</kbd></h3>'}}),angular.module("arkabPortal").directive("orderIcon",function(){return{restrict:"E",template:'<span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span>'}}),angular.module("arkabPortal").directive("escKey",function(){return function(a,b,c){b.bind("keydown keypress",function(b){27===b.which&&(a.$apply(function(){a.$eval(c.escKey)}),b.preventDefault())})}}),angular.module("arkabPortal").directive("akbdatepicker",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){$.datetimepicker.setLocale("pt-BR"),$(b).datetimepicker({ignoreReadonly:!0,allowInputToggle:!0,format:"d/m/Y",formatDate:"d/m/Y",dayOfWeekStart:0,timepicker:!1})}}}),angular.module("arkabPortal").directive("akbdatetimepicker",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){$.datetimepicker.setLocale("pt-BR"),$(b).datetimepicker({format:"d/m/Y H:i",formatDate:"d/m/Y",formatTime:"H:i",dayOfWeekStart:0})}}}),angular.module("arkabPortal").directive("setFocus",["$timeout",function(a){return{scope:{trigger:"@setFocus"},link:function(b,c){b.$watch("trigger",function(b){"true"===b&&a(function(){c[0].focus(),c[0].select()})})}}}]),angular.module("arkabPortal").directive("onlyNumbersDate",function(){return function(a,b,c){b.bind("keydown",function(a){$.inArray(a.which,[46,8,9,27,13,110,61,35,36,37,38,39,193,111])===-1&&(a.shiftKey||a.which<48||a.which>57)&&(a.which<96||a.which>105)&&a.preventDefault()})}}),angular.module("arkabPortal").directive("onlyNumbersPlus",function(){return function(a,b,c){b.bind("keydown",function(a){$.inArray(a.which,[46,8,9,27,13,110,61,107,187,35,36,37,38,39,44])===-1&&(a.shiftKey||a.which<48||a.which>57)&&(a.which<96||a.which>105)&&a.preventDefault()})}}),angular.module("arkabPortal").directive("onlyNumbers",function(){return function(a,b,c){b.bind("keydown keypress",function(a){$.inArray(a.which,[46,8,9,27,13,110])!==-1||a.which>=35&&a.which<=39||(a.shiftKey||a.which<48||a.which>57)&&(a.which<96||a.which>105)&&a.preventDefault()})}}),angular.module("arkabPortal").directive("akbCheck",function(){return{restrict:"E",require:"ngModel",scope:{check:"=ngModel",disabled:"=disabled"},template:'<span class="fa fa-2x" aria-hidden="true" style="cursor: pointer" ng-class="{\'fa-square-o text-muted\': !check, \'fa-check-square text-primary\': check}" ng-click="checkClick()";></span>',link:function(a,b,c,d,e){a.checkClick=function(){a.disabled||(a.check=!a.check)}}}}),angular.module("arkabPortal").directive("akbCheckSm",function(){return{restrict:"E",require:"ngModel",scope:{check:"=ngModel",disabled:"=disabled"},template:'<span class="fa" aria-hidden="true" style="cursor: pointer" ng-class="{\'fa-square-o text-muted\': !check, \'fa-check-square text-primary\': check}" ng-click="checkClick()";></span>',link:function(a,b,c,d,e){a.checkClick=function(){a.disabled||(a.check=!a.check)}}}}),angular.module("arkabPortal").directive("akbCheckSmInverted",function(){return{restrict:"E",require:"ngModel",scope:{check:"=ngModel",disabled:"=disabled"},template:'<span class="fa" aria-hidden="true" style="cursor: pointer" ng-class="{\'fa-square-o text-muted\': check, \'fa-check-square text-primary\': !check}" ng-click="checkClick()";></span>',link:function(a,b,c,d,e){a.checkClick=function(){a.disabled||(a.check=!a.check)}}}}),angular.module("arkabPortal").directive("akbRadio",function(){return{restrict:"E",require:"ngModel",scope:{check:"=ngModel",disabled:"=disabled"},template:'<span class="fa fa-2x" aria-hidden="true" style="cursor: pointer" ng-class="{\'fa-circle-thin text-muted\': !check, \'fa-dot-circle-o text-primary\': check}" ng-click="checkClick()";></span>',link:function(a,b,c,d,e){a.checkClick=function(){a.disabled||(a.check=!0)}}}}),angular.module("arkabPortal").directive("akbCheckbox",function(){return{restrict:"E",require:"ngModel",scope:{check:"=ngModel",label:"@",block:"<block"},template:'<button class="btn btn-default btn-sm" ng-click="check = !check" ng-class="{\'btn-block\': block}"><span class="fa fa" aria-hidden="true" style="cursor: pointer" ng-class="{\'fa-square-o text-muted\': !check, \'fa-check-square text-primary\': check}"></span> {{label}}</button>',link:function(a,b,c,d){}}}),angular.module("arkabPortal").directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.fileModel),f=e.assign;c.bind("change",function(){b.$apply(function(){f(b,c[0].files[0])})})}}}]),angular.module("arkabPortal").directive("fileDownload",function(){return{restrict:"A",scope:{fileDownload:"=",fileName:"="},link:function(a,b,c){a.$watch("fileDownload",function(c,d){if(void 0!=c&&null!=c){console.debug("Downloading a new file");var e="undefined"!=typeof InstallTrigger,f=(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,!!document.documentMode),g=(!f&&!!window.StyleMedia,!!window.chrome&&!!window.chrome.webstore),h=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0;(g||h)&&!!window.CSS;if(e||f||g){if(g){console.log("Manage Google Chrome download");var i=window.URL||window.webkitURL,j=i.createObjectURL(a.fileDownload),k=angular.element("<a></a>");k.attr("href",j),k.attr("download",a.fileName),k.attr("target","_self"),k[0].click(),i.revokeObjectURL(j)}if(f&&(console.log("Manage IE download>10"),window.navigator.msSaveOrOpenBlob(a.fileDownload,a.fileName)),e){console.log("Manage Mozilla Firefox download");var i=window.URL||window.webkitURL,j=i.createObjectURL(a.fileDownload),l=b[0];l.href=j,l.download=a.fileName,l.target="_self",l.click()}}else alert("Desculpe, mas o seu browser não é compatível.")}})}}}),angular.module("arkabPortal").directive("hcChart",function(){return{restrict:"E",template:"<div></div>",scope:{options:"="},link:function(a,b){Highcharts.chart(b[0],a.options)}}}),angular.module("arkabPortal").directive("hcStockChart",function(){return{restrict:"E",template:"<div></div>",scope:{options:"="},link:function(a,b){Highcharts.stockChart(b[0],a.options)}}}),angular.module("arkabPortal").directive("hcPieChart",function(){return{restrict:"E",template:"<div></div>",scope:{title:"@",data:"="},link:function(a,b){Highcharts.chart(b[0],{credits:{enabled:!1},chart:{type:"pie",backgroundColor:"transparent",options3d:{enabled:!1,alpha:40,beta:0,depth:25}},title:{text:a.title},tooltip:{valueDecimals:0,valuePrefix:"R$ ",valueSuffix:",00"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:25,dataLabels:{enabled:!1,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{type:"pie",data:a.data}]})}}}),angular.module("arkabPortal").directive("hcPieLabelChart",function(){return{restrict:"E",template:"<div></div>",scope:{title:"@",data:"="},link:function(a,b,c){c.tooltipDecimals||(c.tooltipDecimals=0),c.tooltipValuePrefix||(c.tooltipValuePrefix="R$ "),c.tooltipValueSuffix||(c.tooltipValueSuffix=",00");var d={credits:{enabled:!1},chart:{type:"pie",backgroundColor:"transparent",options3d:{enabled:!1,alpha:40,beta:0,depth:25}},title:{text:a.title},tooltip:{valueDecimals:c.tooltipDecimals,valuePrefix:c.tooltipValuePrefix,valueSuffix:c.tooltipValueSuffix},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",depth:25,dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f}%"}}},series:[{type:"pie",data:a.data}]};Highcharts.chart(b[0],d)}}}),angular.module("arkabPortal").directive("temperatureChart",function(){return{restrict:"E",template:"<div></div>",scope:{title:"@",data:"="},link:function(a,b){Highcharts.chart(b[0],{credits:{enabled:!1},chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0},title:{text:"Temperatura"},pane:{startAngle:-165,endAngle:165,background:[{className:"outer-pane",outerRadius:"115%"},{className:"middle-pane",outerRadius:"112%"},{},{className:"inner-pane",outerRadius:"105%",innerRadius:"103%"}]},yAxis:{min:a.data.devicemintemp-10,max:a.data.devicemaxtemp+10,minorTickInterval:"auto",minorTickWidth:1,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",tickPixelInterval:30,tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#666",labels:{step:2,rotation:"auto"},title:{text:"°C"},plotBands:[{from:a.data.devicemintemp-10,to:a.data.devicemintemp-5,className:"red-band"},{from:a.data.devicemintemp-5,to:a.data.devicemintemp,className:"yellow-band"},{from:a.data.devicemintemp,to:a.data.devicemaxtemp,className:"green-band"},{from:a.data.devicemaxtemp,to:a.data.devicemaxtemp+5,className:"yellow-band"},{from:a.data.devicemaxtemp+5,to:a.data.devicemaxtemp+10,className:"red-band"}]},series:[{name:"Atual",data:[a.data.actualtemp],tooltip:{valueSuffix:" °C"}},{name:"Min",data:[a.data.mintemp],tooltip:{valueSuffix:" °C"}},{name:"Máx",data:[a.data.maxtemp],tooltip:{valueSuffix:" °C"}}]},function(b){b.renderer.forExport||setInterval(function(){var c,d=b.series[0].points[0];c=a.data.actualtemp,d.update(c)},1e3)})}}}),angular.module("arkabPortal").directive("humidityChart",function(){return{restrict:"E",template:"<div></div>",scope:{title:"@",data:"="},link:function(a,b){Highcharts.chart(b[0],{credits:{enabled:!1},chart:{type:"gauge",plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1},title:{text:"Umidade "},pane:{startAngle:-165,endAngle:165,background:[{className:"outer-pane",outerRadius:"115%"},{className:"middle-pane",outerRadius:"112%"},{},{className:"inner-pane",outerRadius:"105%",innerRadius:"103%"}]},yAxis:{min:0,max:100,minorTickInterval:"auto",minorTickWidth:1,minorTickLength:10,minorTickPosition:"inside",minorTickColor:"#666",tickPixelInterval:30,tickWidth:2,tickPosition:"inside",tickLength:10,tickColor:"#666",labels:{step:2,rotation:"auto"},title:{text:"%"},plotBands:[]},series:[{name:"Atual",data:[a.data.actualhumi],tooltip:{valueSuffix:"%"}},{name:"Min",data:[a.data.minhumi],tooltip:{valueSuffix:"%"}},{name:"Máx",data:[a.data.maxhumi],tooltip:{valueSuffix:"%"}}]},function(b){b.renderer.forExport||setInterval(function(){var c,d=b.series[0].points[0];c=a.data.actualhumi,d.update(c)},1e3)})}}}),angular.module("arkabPortal").directive("temperatureRangeChart",function(){return{restrict:"E",template:"<div></div>",scope:{title:"@",ranges:"=",temperatures:"="},link:function(a,b){Highcharts.chart(b[0],{title:{text:a.title},xAxis:{type:"datetime"},yAxis:{title:{text:null}},tooltip:{crosshairs:!0,shared:!0,valueSuffix:"°C"},legend:{enabled:!1},series:[{name:"Temperatura média",data:a.temperatures,marker:{fillColor:"white",lineWidth:2,lineColor:Highcharts.getOptions().colors[0]}},{name:"Mínima e máxima",data:a.ranges,type:"arearange",lineWidth:0,linkedTo:":previous",color:Highcharts.getOptions().colors[0],fillOpacity:.3,zIndex:0,marker:{enabled:!1}}]})}}}),angular.module("arkabPortal").directive("preLoader",function(){return{restrict:"E",template:'<div class="supLoader"></div>'}}),angular.module("arkabPortal").directive("preLoaderReseller",function(){return{restrict:"E",template:'<div class="supLoaderReseller"></div>'}}),angular.module("arkabPortal").directive("preLoaderText",function(){return{restrict:"E",template:'<div id="loadingCentered"><center><div align="center" class="cssload-fond">\t<div class="cssload-container-general"><div class="cssload-internal"><div class="cssload-ballcolor cssload-ball_1"></div></div><div class="cssload-internal"><div class="cssload-ballcolor cssload-ball_2"></div></div><div class="cssload-internal"><div class="cssload-ballcolor cssload-ball_3"></div></div><div class="cssload-internal"><div class="cssload-ballcolor cssload-ball_4"></div></div></div></div><br/><h3>{{loaderTitle}}<br><small>{{loaderMessage}}</small></h3></center></div>',link:function(a,b,c){a.loaderTitle=c.loaderTitle,a.loaderMessage=c.loaderMessage}}}),angular.module("arkabPortal").directive("whirlPool",function(){return{restrict:"E",template:'<div class="whirlpool"><div class="ring ring1"></div><div class="ring ring2"></div><div class="ring ring3"></div><div class="ring ring4"></div><div class="ring ring5"></div><div class="ring ring6"></div><div class="ring ring7"></div><div class="ring ring8"></div><div class="ring ring9"></div></div>'}}),angular.module("arkabPortal").constant("appConfigKeys",{googleMapsAPIKey:"AIzaSyBNeYTBeIZb23_4fE2Ox5a6weXcH6FoS3M",googleAnalyticsKey:"UA-86794666",googleMapsAPIUrl:"https://maps.googleapis.com/maps/api/geocode/json",publishVersion:"2020-01-13-1400"}),angular.module("arkabPortal").constant("appConfigComponents",{daterangeoptions:{autoApply:!1,autoUpdateInput:!0,ranges:{Hoje:[moment(),moment()],Ontem:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Este mês":[moment().startOf("month"),moment().endOf("month")],"Mês passado":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Últimos 7 dias":[moment().subtract(6,"days"),moment()],"Últimos 30 dias":[moment().subtract(29,"days"),moment()],"Próximos 7 dias":[moment(),moment().add(6,"days")],"Próximos 30 dias":[moment(),moment().add(29,"days")],"Próximo mês":[moment().add(1,"month").startOf("month"),moment().add(1,"month").endOf("month")],"Este ano":[moment().startOf("year"),moment()],"Ano passado":[moment().subtract(1,"year").startOf("year"),moment().subtract(1,"year").endOf("year")]},locale:{format:"DD/MM/YYYY",separator:" até ",applyLabel:"Aplicar",cancelLabel:"Limpar",fromLabel:"De",toLabel:"Até",customRangeLabel:"Especificar",weekLabel:"W",daysOfWeek:["D","S","T","Q","Q","S","S"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],firstDay:1},linkedCalendars:!1,alwaysShowCalendars:!1,minDate:moment().subtract(2,"years"),maxDate:moment().add(2,"year"),showDropdowns:!1}}),angular.module("arkabPortal").service("urlConfig",["$window","urlConfigParams",function(a,b){var c=b.config;isCordovaApp&&(c.protocol=a.localStorage.getItem("protocol"),c.baseUrl=a.localStorage.getItem("baseUrl"),c.dataProfile=a.localStorage.getItem("dataProfile"),c.googleAnalyticsChild=a.localStorage.getItem("googleAnalyticsChild")),this.getUrlConfig=function(){return c},this.valid=function(){return!!(c.baseUrl&&c.dataProfile&&c.googleAnalyticsChild)}}]),angular.module("arkabPortal").constant("blackLists",{representativesBlackList:[{path:"/monitor",option:"path"},{path:"/adm",option:"domain"}],resellersBlackList:[{path:"/monitor",option:"domain"},{path:"/adm",option:"domain"},{path:"/activity",option:"domain"},{path:"/activities",option:"domain"},{path:"/reports/stock",option:"domain"},{path:"/reports/customersList",option:"domain"},{path:"/reports/progression",option:"domain"},{path:"/reports/revenue",option:"domain"},{path:"/reports/campaing",option:"domain"},{path:"/reports/opportunities",option:"domain"},{path:"/reports/comission",option:"domain"},{path:"/reports/revenue",option:"domain"},{path:"/customer/search",option:"domain"}]}),Highcharts.theme={colors:["#60BD68","#5DA5DA","#F15854","#FAA43A","#4D4D4D","#F17CB0","#B2912F","#B276B2","#DECF3F","#7cb5ec","#90ee7e","#f7a35c","#7798BF","#DF5353","#55BF3B"],chart:{backgroundColor:null,style:{fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif"}},title:{style:{fontSize:"16px",fontWeight:"bold"}},tooltip:{borderWidth:0,backgroundColor:"rgba(219,219,216,0.8)",shadow:!1},legend:{itemStyle:{fontWeight:"bold",fontSize:"15px"}},xAxis:{gridLineWidth:1,labels:{style:{fontSize:"14px"}}},yAxis:{minorTickInterval:"auto",title:{style:{}},labels:{style:{fontSize:"12px"}}},plotOptions:{candlestick:{lineColor:"#404048"}},background2:"#F0F0EA"},Highcharts.setOptions(Highcharts.theme),angular.module("arkabPortal").constant("i18nData",{home:{EM_ANDAMENTO:["Em andamento","In progress"],TEMPO:["Tempo","Timespan"],CLIENTE:["Cliente","Customer"],ORIGEM:["Origem","Source"],ITENS:["Itens","Items"],DIAS_UTEIS:["Dias úteis","Workdays"],PREVISTO:["Previsto","Expected"],REALIZADO:["Realizado","Accomplished"],RESULTADO:["Resultado","Result"],MEDIA_DIARIA:["Média diária","Daily Average"],META_DO_DIA:["Meta do dia","Today goal"],PROJECAO:["Projeção","Projection"],BLOQUEADOS:["Bloqueados","Blocked"],AUTORIZADOS:["Autorizados","Authorized"],DATA:["Data","Date"],INDICE:["Índice","Index"],COMPRA:["Compra","Buy"],VENDA:["Venda","Sell"],FONTE:["Fonte","Source"]}}),angular.module("arkabPortal").constant("i18nDataCustom",{home:{EM_ANDAMENTO:["Em progresso"]}}),angular.module("arkabPortal").config(["$routeProvider","$locationProvider","$httpProvider","$compileProvider",function(a,b,c,d){a.when("/login",{templateUrl:"view/login.html",controller:"rootCtrl"}).when("/about",{templateUrl:"view/about.html",controller:"aboutCtrl"}).when("/unauthorized",{templateUrl:"view/unauthorized.html",controller:"unauthorizedCtrl"}).when("/404",{templateUrl:"view/unauthorized.html",controller:"unauthorizedCtrl"}).when("/remember",{templateUrl:"view/public/remember.html",controller:"rememberCtrl"}).when("/setup",{templateUrl:"view/public/setup.html",controller:"setupCtrl"}).when('/remember?token=":token"&email=":email"',{templateUrl:"view/public/remember.html",controller:"rememberCtrl"}).when("/adm",{templateUrl:"view/adm/adm.html",controller:"admCtrl"}).when("/adm/lcq",{templateUrl:"view/adm/lcq/lcq.html",controller:"admLcqCtrl"}).when("/adm/lcq/permissions",{templateUrl:"view/adm/lcq/permissions.html",controller:"admLcqPermissionsCtrl"}).when("/adm/lcq/statuslote",{templateUrl:"view/adm/lcq/statuslote.html",controller:"admLcqStatusLoteCtrl"}).when("/adm/industry",{templateUrl:"view/adm/industry/industry.html",controller:"admIndustryCtrl"}).when("/adm/industry/permissions",{templateUrl:"view/adm/industry/permissions.html",controller:"admIndustryPermissionsCtrl"}).when("/",{templateUrl:"view/home.html",controller:"homeCtrl"}).when("/home",{templateUrl:"view/home.html",controller:"homeCtrl"}).when("/adm/userprofile/:userid",{templateUrl:"view/adm/userProfile.html",controller:"admUserCtrl"}).when("/adm/userprofile",{templateUrl:"view/adm/userProfile.html",controller:"admUserCtrl"}).when("/profile",{templateUrl:"view/userProfile.html",controller:"userProfileCtrl"}).when("/lcq/ficha/:code",{templateUrl:"view/lcq/lcq.html",controller:"lcqFichaCtrl"}).when("/lcq",{templateUrl:"view/lcq/lcq.html",controller:"lcqCtrl"}).when("/lcq/ficha/:code",{templateUrl:"view/lcq/lcqFicha.html",controller:"lcqFichaCtrl"}).when("/lcq/ficha/:code",{templateUrl:"view/lcq/lcqFicha.html",controller:"lcqFichaCtrl"}).when("/lcq/certificado/:code",{templateUrl:"view/lcq/lcqCertificado.html",controller:"lcqCertificadoCtrl"}).when("/thermometer",{templateUrl:"view/thermometer/thermometer.html",controller:"thermometerCtrl"}).when("/thermometer/:thermometerName",{templateUrl:"view/thermometer/thermometer.html",controller:"thermometerCtrl"}).when("/thermometer/:thermometerName/temperatures",{templateUrl:"view/thermometer/temperatures.html",controller:"temperaturesCtrl"}).when("/thermometer/:thermometerName/setup",{templateUrl:"view/thermometer/setup.html",controller:"thermometerSetupCtrl"}).when("/industry/mrp",{templateUrl:"view/industry/mrp.html",controller:"industryMRPCtrl"}).when("/industry/mrp/products",{templateUrl:"view/industry/mrp/products.html",controller:"industryMRPProductsCtrl"}).when("/industry/mrp/materials",{templateUrl:"view/industry/mrp/materials.html",controller:"industryMRPMaterialsCtrl"}).when("/industry/mrp/exec",{templateUrl:"view/industry/mrp/exec.html",controller:"mrpExecCtrl"}).otherwise({redirectTo:"/"}),c.interceptors.push("httpInterceptor")}]),angular.module("arkabPortal").controller("admCtrl",["$scope","identityService","appConfigKeys","$timeout",function(a,b,c,d){function e(){a.img=Math.floor(6*Math.random())+1}function f(){e(),d(function(){f()},13e3)}a.message="",document.title="Painel de controle",a.identity=b.getUserIdentity().userName,a.publishVersion=c.publishVersion,f()}]),angular.module("arkabPortal").controller("admUserCtrl",["$scope","$location","$routeParams","$timeout","identityService","admService","urlConfig",function(a,b,c,d,e,f,g){a.params={userid:c.userid,apiurl:g.getUrlConfig().baseUrl,identity:e.getUserIdentity(),revendaID:0,message:"",loading:!1,user:{},sellers:[],roles:[],teams:[],allteams:[],branches:{multibranches:!1,branches:[]},getRolesList:function(){f.getRolesList().success(function(b){a.params.roles=b}).error(function(a,b){console.log(a,b)})},getUserProfile:function(){return a.params.loading=!0,a.params.userid?void f.getUserProfile(a.params.userid).success(function(b){document.title=b.username,b.birthdate=formatDateToPtBr(b.birthdate),a.params.user=b,a.params.user.reseller&&a.getCustomerDetails(a.params.user.reseller),a.params.loading=!1,a.params.setTeamList()}).error(function(b,c){a.params.loading=!1,console.log(b)}):void(a.params.loading=!1)},setTeamList:function(){a.params.teams=[],a.params.user&&a.params.allteams&&(a.params.user.teams||(a.params.user.teams=[]),$.each(a.params.allteams,function(b,c){var d=!1;$.each(a.params.user.teams,function(a,b){if(c.code==b.code)return d=!0,!1}),d||a.params.teams.push(angular.copy(c))}))},putTeam:function(b){a.params.user&&a.params.allteams&&a.params.user.teams&&($.each(a.params.allteams,function(c,d){d.code==b&&a.params.user.teams.push(d)}),a.params.setTeamList())},removeTeam:function(b){a.params.user&&a.params.allteams&&a.params.user.teams&&($.each(a.params.user.teams,function(c,d){d&&d.code==b&&a.params.user.teams.splice(c,1)}),a.params.setTeamList())},save:function(){return a.params.saving=!0,a.params.message="",a.params.user.roleid!=a.params.revendaID||a.params.user.reseller?(a.params.user.createseller=a.params.user.slpcode==-1,a.params.user.branches=[],a.params.user.roleid!=a.params.revendaID&&(a.params.user.reseller=""),$.each(a.params.branches.branches,function(b,c){c.selected&&a.params.user.branches.push(c)}),void f.saveUserProfile(a.params.user).success(function(b){a.params.getIntegrationStatus(b)}).error(function(b,c){console.log(b,c),a.params.message=b.Message,a.params.saving=!1})):(a.params.message="Informe o código da revenda (parceiro SAP)",void(a.params.saving=!1))},getIntegrationStatus:function(c){f.getUserIntegrationStatus(c).success(function(d){"I"==d.status?a.params.userid?a.params.saving=!1:(a.params.userid=d.user_id,e.register(a.params.user.email,"Password123!",g.getUrlConfig().dataProfile).success(function(c){f.getUserProfile(a.params.userid).success(function(c){a.params.user=c,f.putUserLicense(a.params.user.api).success(function(c){b.path("/adm/userprofile/"+a.params.userid),a.params.saving=!1}).error(function(c,d){b.path("/adm/userprofile/"+a.params.userid),a.params.saving=!1,console.log(c)})}).error(function(b,c){a.params.saving=!1,console.log(b)})}).error(function(c,d){console.log(c,d),b.path("/adm/userprofile/"+a.params.userid)})):"E"==d.status?(a.params.saving=!1,console.log(d),a.params.message=d.message):a.params.getIntegrationStatus(c)}).error(function(a,b){console.log(a,b)})},register:function(){e.register(a.params.user.email,"Password123!",g.getUrlConfig().dataProfile).success(function(b){a.params.getUserProfile()}).error(function(a,b){console.log(a,b)})},putUserLicense:function(){f.putUserLicense(a.params.user.api).success(function(b){a.params.getUserProfile()}).error(function(a,b){console.log(a)})},removeUserLicense:function(b){f.removeUserLicense(a.params.user.api).success(function(b){a.params.getUserProfile()}).error(function(a,b){console.log(a)})},getUserBranches:function(){a.params.userid>0&&f.getUserBranches(a.params.userid).success(function(b){a.params.branches=b}).error(function(a,b){console.log(a,b)})},getEmailSuggestion:function(){console.log("hi"),a.params.user.email=createGuid().substring(1,8)+"@email.com"},init:function(){a.params.userid||(document.title="Novo usuário"),a.params.getUserBranches(),a.params.getRolesList(),a.params.getUserProfile()}},a.customerSearchParam="",a.params.init()}]),angular.module("arkabPortal").controller("admIndustryCtrl",["$scope","identityService","appConfigKeys","$timeout",function(a,b,c,d){function e(){a.img=Math.floor(6*Math.random())+1}function f(){e(),d(function(){f()},13e3)}a.message="",document.title="Painel de controle - Indústria",a.identity=b.getUserIdentity().userName,a.publishVersion=c.publishVersion,f()}]),angular.module("arkabPortal").controller("admIndustryPermissionsCtrl",["$scope","identityService","appConfigKeys","industryService",function(a,b,c,d){a.message="",document.title="Permissões industria",a.getPermissions=function(){a.permissions=null,a.loading=!0,d.getPermissions().success(function(b){a.permissions=b,a.loading=!1}).error(function(b,c){a.loading=!1,console.log(b,c)})},a.getPermissions(),a.putPermission=function(b){a.saving=!0,d.putPermission(b).success(function(b){a.saving=!1}).error(function(b,c){console.log(b,c),a.saving=!1})}}]),angular.module("arkabPortal").controller("admLcqCtrl",["$scope","identityService","appConfigKeys","$timeout",function(a,b,c,d){function e(){a.img=Math.floor(6*Math.random())+1}function f(){e(),d(function(){f()},13e3)}a.message="",document.title="Painel de controle - LCQ",a.identity=b.getUserIdentity().userName,a.publishVersion=c.publishVersion,f();
}]),angular.module("arkabPortal").controller("admLcqPermissionsCtrl",["$scope","identityService","appConfigKeys","lcqService",function(a,b,c,d){a.message="",document.title="Permissões",a.getPermissions=function(){a.permissions=null,a.loading=!0,d.getPermissions().success(function(b){a.permissions=b,a.loading=!1}).error(function(b,c){a.loading=!1,console.log(b,c)})},a.getPermissions(),a.putPermission=function(b){a.saving=!0,d.putPermission(b).success(function(b){a.saving=!1}).error(function(b,c){console.log(b,c),a.saving=!1})}}]),angular.module("arkabPortal").controller("admLcqStatusLoteCtrl",["$scope","identityService","appConfigKeys","lcqService",function(a,b,c,d){a.message="",document.title="Status do lote",a.getStatusLoteUsersList=function(){d.getStatusLoteUsersList().success(function(b){a.statusLoteList=b}).error(function(a,b){console.log(a,b)})},a.selectStatus=function(b){b.selection=angular.copy(a.permissions),$.each(b.users,function(a,c){$.each(b.selection,function(a,d){if(c.userid==d.userid)return b.selection.splice(a,1),!1})}),a.selected=b,angular.element("#modalStatusLoteUsers").modal("show")},a.addUser=function(a,b){d.postStatusLoteUser(a.code,b.userid).success(function(c){$.each(a.selection,function(c,d){if(d.userid==b.userid)return a.selection.splice(c,1),!1}),a.users.push({userid:b.userid,username:b.username})}).error(function(a,b){console.log(a,b)})},a.removeUser=function(a,b){d.deleteStatusLoteUser(a.code,b.userid).success(function(c){$.each(a.users,function(c,d){if(d.userid==b.userid)return a.users.splice(c,1),!1}),a.selection.push({userid:b.userid,username:b.username})}).error(function(a,b){console.log(a,b)})},a.getPermissions=function(){a.permissions=null,a.loading=!0,d.getPermissions().success(function(b){a.permissions=b,a.loading=!1}).error(function(b,c){a.loading=!1,console.log(b,c)})},a.init=function(){a.getStatusLoteUsersList(),a.getPermissions()},a.init()}]),angular.module("arkabPortal").controller("homeCtrl",["$scope","identityService","appConfig","$location","urlConfig","lcqService","appConfigKeys",function(a,b,c,d,e,f,g){document.title="Home",a.isCordovaApp=isCordovaApp,a.appConfig=c.getAppConfig(),a.appConfigKeys=g,a.identity=b.getUserIdentity(),a.apiURL=e.getUrlConfig().baseUrl,a.myInterval=c.getAppConfig().carouselSlideTimer?c.getAppConfig().carouselSlideTimer:6e3,a.init=function(){var b=[],c=[],d=[],e=[];f.getIndicadoresLCQ().success(function(f){a.indicadores=f,$.each(f.statuslote,function(a,c){b.push({name:c.label,y:c.quantity})}),$.each(f.statuslotefechado,function(a,b){c.push({name:b.label,y:b.quantity})}),$.each(f.tipoanalise,function(a,b){d.push({name:b.label,y:b.quantity})}),$.each(f.grupo,function(a,b){e.push({name:b.label,y:b.quantity})}),a.chartStatusLote=b,a.chartStatusLoteFechado=c,a.chartTipoAnalise=d,a.chartGrupo=e}).error(function(a,b){console.log(a,b)})},a.init()}]),angular.module("arkabPortal").controller("industryMRPCtrl",["$scope","identityService","appConfig","industryService","$location",function(a,b,c,d,e){document.title="MRP",a.isCordovaApp=isCordovaApp,!b.getUserIdentity().industrypermission.bloqueado&&b.getUserIdentity().industrypermission.mrp||e.path("/")}]),angular.module("arkabPortal").controller("industryMRPMaterialsCtrl",["$scope","identityService","appConfig","industryService","$timeout",function(a,b,c,d,e){function f(){var b=$.grep(a.opsList,function(a){return a.saving}).length;b||(a.saved=!0,a.saving=!1,a.getMRP())}function g(b){d.getWorkingOrderIntegrationStatus(b.id).success(function(a){"I"==a.status||"E"==a.status?("I"==a.status?(b.saving=!1,b.workorderentry=a.workorderentry):"E"==a.status&&(b.saving=!1,b.serverResponse=a.message),f()):g(b)}).error(function(b,c){console.log(b,c),a.saving=!1,a.saved=!1})}document.title="MRP Produtos",!b.getUserIdentity().industrypermission.bloqueado&&b.getUserIdentity().industrypermission.mrp||$location.path("/"),a.isCordovaApp=isCordovaApp,a.view="mrp",a.search="",a.changeView=function(b){a.view=b},a.getMRP=function(){a.loading=!0,d.getMaterialMRP().success(function(b){var c=[],d={name:"Alertas",data:[]};$.each(b,function(a,b){if(c.push(b.itemcode),b.lack>0&&d.data.push(b.lack),a>=19)return!1}),a.alertsChart={chart:{type:"column",backgroundColor:"transparent"},title:{text:"Top 20 alertas de falta de produtos"},credits:{enabled:!1},xAxis:{categories:c,type:"category",labels:{rotation:-60,style:{fontSize:"12px"}}},yAxis:{title:{text:"Alertas"}},tooltip:{crosshairs:!0,shared:!0,valueSuffix:" unidades"},legend:{enabled:!1},exporting:{enabled:!1},series:[d]},a.mrp=b,a.loading=!1}).error(function(b,c){console.log(b,c),a.loading=!1})},a.program=function(a){a.program=a.suggestion},a.getMRP(),a.postOPs=function(){a.opsList=null;var b=$.grep(a.mrp,function(a,b){return a.program>0});0!=b.length&&(a.opsList=b,a.saved=!1,a.saving=!1,$("#modalPostOps").modal("show"))},a.confirmPostOps=function(){return a.confirmPostOpsMessage=null,a.saved=!1,a.saving=!0,0==a.opsList.length?void(a.confirmPostOpsMessage="Nenhuma ordem de produção informada."):void d.postWorkOrders(a.opsList).success(function(b){a.opsList=b.oplist,$.each(a.opsList,function(a,b){console.log(b),b.saving=!0,g(b)})}).error(function(b,c){console.log(b,c),a.saving=!1})},a.selectAll=function(b){$.each(a.mrp,function(a,c){b?c.lack&&(c.program=c.lack):c.program=c.lack})}}]),angular.module("arkabPortal").controller("industryMRPProductsCtrl",["$scope","identityService","appConfig","industryService","$timeout",function(a,b,c,d,e){function f(){var b=$.grep(a.opsList,function(a){return a.saving}).length;b||(a.saved=!0,a.saving=!1,a.getMRP())}function g(b){d.getWorkingOrderIntegrationStatus(b.id).success(function(a){"I"==a.status||"E"==a.status?("I"==a.status?(b.saving=!1,b.workorderentry=a.workorderentry):"E"==a.status&&(b.saving=!1,b.serverResponse=a.message),f()):g(b)}).error(function(b,c){console.log(b,c),a.saving=!1,a.saved=!1})}document.title="MRP Produtos",!b.getUserIdentity().industrypermission.bloqueado&&b.getUserIdentity().industrypermission.mrp||$location.path("/"),a.isCordovaApp=isCordovaApp,a.view="mrp",a.search="",a.order={by:"lack",inverted:!0},a.orderBy=function(b){b!=a.order.by?a.order.inverted=!1:a.order.inverted=!a.order.inverted,a.order.by=b},a.changeView=function(b){a.view=b},a.getMRP=function(){a.loading=!0,d.getProductMRP().success(function(b){var c=[],d={name:"Alertas",data:[]};$.each(b,function(a,b){if(c.push(b.itemcode),b.lack>0&&d.data.push(b.lack),a>=19)return!1}),a.alertsChart={chart:{type:"column",backgroundColor:"transparent"},title:{text:"Top 20 alertas de falta de produtos"},credits:{enabled:!1},xAxis:{categories:c,type:"category",labels:{rotation:-60,style:{fontSize:"12px"}}},yAxis:{title:{text:"Alertas"}},tooltip:{crosshairs:!0,shared:!0,valueSuffix:" unidades"},legend:{enabled:!1},exporting:{enabled:!1},series:[d]},a.mrp=b,a.loading=!1}).error(function(b,c){console.log(b,c),a.loading=!1})},a.program=function(a){a.program=a.suggestion},a.getMRP(),a.postOPs=function(){a.opsList=null;var b=$.grep(a.mrp,function(a,b){return a.program>0});0!=b.length&&(a.opsList=b,a.saved=!1,a.saving=!1,$("#modalPostOps").modal("show"))},a.confirmPostOps=function(){return a.confirmPostOpsMessage=null,a.saved=!1,a.saving=!0,0==a.opsList.length?void(a.confirmPostOpsMessage="Nenhuma ordem de produção informada."):void d.postWorkOrders(a.opsList).success(function(b){a.opsList=b.oplist,$.each(a.opsList,function(a,b){console.log(b),b.saving=!0,g(b)})}).error(function(b,c){console.log(b,c),a.saving=!1})},a.selectAll=function(b){$.each(a.mrp,function(a,c){b?c.lack&&(c.program=c.lack):c.program=c.lack})}}]),angular.module("arkabPortal").controller("mrpExecCtrl",["$scope","identityService","appConfig","industryService","$timeout",function(a,b,c,d,e){function f(){var b=$.grep(a.opsList,function(a){return a.saving});$.each(b,function(a,b){var c=$.grep(b.opsList,function(a){return a.saving}).length;c||(b.saving=!1)}),$.grep(a.opsList,function(a){return a.saving}).length||(a.saved=!0,a.saving=!1,a.getRecommendations())}function g(b){d.getWorkingOrderIntegrationStatus(b.id).success(function(a){"I"==a.status||"E"==a.status?("I"==a.status?(b.saving=!1,b.workorderentry=a.workorderentry):"E"==a.status&&(b.saving=!1,b.serverResponse=a.message),f()):g(b)}).error(function(b,c){console.log(b,c),a.saving=!1,a.saved=!1})}document.title="Execução do MRP",a.isCordovaApp=isCordovaApp,!b.getUserIdentity().industrypermission.bloqueado&&b.getUserIdentity().industrypermission.mrp||$location.path("/"),a.view="mrp",a.search="",a.order={by:"releasdate",inverted:!1},a.params={ordertype:"W",scenario:3,whscode:""},a.warehouseList=[],a.orderTypeList=[{code:"",name:"Todos"},{code:"W",name:"Produção"},{code:"P",name:"Compra"}],a.orderBy=function(b){b!=a.order.by?a.order.inverted=!1:a.order.inverted=!a.order.inverted,a.order.by=b},a.changeView=function(b){a.view=b},a.getScenarios=function(){d.getScenarios().success(function(b){a.scenariosList=b,a.getRecommendations()}).error(function(a,b){console.log(a,b)})},a.getWarehouses=function(){d.getMRPWarehouses(a.params.ordertype).success(function(b){b.unshift({whscode:"",whsname:"*Todos"}),a.warehousesList=b}).error(function(a,b){console.log(a,b)})},a.getRecommendations=function(){a.loading=!0,a.warehouseList=[],d.getRecommendations(a.params).success(function(b){a.mrp=b,a.loading=!1}).error(function(b,c){console.log(b,c),a.loading=!1})},a.changeStartDate=function(){!a.params.enddate&&a.params.startdate&&(a.params.enddate=a.params.startdate)},a.changeValue=function(a,b){"t"==b?a.quantity<a.economicalbatch?(a.batches=1,a.batchquantity=a.economicalbatch,a.batchrest=0):(a.batches=Math.floor(a.quantity/a.economicalbatch),a.batchquantity=a.economicalbatch,a.batchrest=a.quantity%a.economicalbatch):"b"==b?(a.batchquantity=Math.floor(a.quantity/a.batches),a.batchrest=a.quantity%a.batchquantity):"q"==b?a.batchquantity>a.quantity?(a.batchquantity=a.quantity,a.batches=1):(a.batches=Math.floor(a.quantity/a.batchquantity),a.batchrest=a.quantity%a.batchquantity):"r"==b&&(a.batchrest>=a.batchquantity&&(a.batchrest=a.batchquantity-1),a.quantity=a.batches*a.batchquantity+a.batchrest)},a.program=function(a){a.program=a.suggestion},a.executeRecommendation=function(){a.opsList=null;var b=0,c=$.grep(a.mrp,function(a,b){return 1==a.create});0!=c.length&&($.each(c,function(a,c){var d=[];c.saving=!1,c.saved=!1,c.message="",c.releasdate_f=formatDateToPtBr(c.releasdate),c.duedate_f=formatDateToPtBr(c.duedate);var e=angular.copy(c);e.saving=!1,e.saved=!1,e.workorderentry=0,e.batches=1,e.batchrest=0,e.quantity=c.batchquantity,e.id=0;for(var f=1;f<=c.batches;f++)e.number=++b,d.push(angular.copy(e));c.batchrest&&(e.number=++b,e.quantity=c.batchrest,e.ajust=!0,d.push(angular.copy(e))),c.opsList=d}),a.opsList=c,a.saved=!1,a.saving=!1,$("#modalExecRec").modal("show"))},a.confirmPostOps=function(){return a.confirmPostOpsMessage=null,a.saved=!1,a.saving=!0,0==a.opsList.length?void(a.confirmPostOpsMessage="Nenhuma ordem de produção informada."):void $.each(a.opsList,function(a,b){b.saving=!0,$.each(b.opsList,function(a,b){b.startdate=new Date(b.releasdate),b.duedate=new Date(b.duedate),d.postWorkOrder(b).success(function(a){b.saving=!0,b.id=a.id,g(b)}).error(function(a,c){b.message=a})})})},a.selectAll=function(b){$.each(a.mrp,function(a,c){b?c.lack&&(c.program=c.lack):c.program=c.lack})},a.getScenarios(),a.getWarehouses()}]),angular.module("arkabPortal").controller("lcqCertificadoCtrl",["$scope","identityService","appConfig","$location","urlConfig","lcqService","$routeParams","admService","$timeout",function(a,b,c,d,e,f,g,h,i){document.title="Certificado",a.isCordovaApp=isCordovaApp,a.apiURL=e.getUrlConfig().baseUrl,a.appConfig=c.getAppConfig(),a.params={ficha:g.code,emissao:new Date},b.getCompanyInfo().success(function(b){a.companyInfo=b}).error(function(a,b){console.log(a,b)}),a.getFichaLCQ=function(){a.loading=!0,f.getFichaLCQ(a.params.ficha).success(function(b){$.each(b.linhas,function(a,b){b.obs&&"*"==b.obs.substring(0,1)&&(b.cq=!1,b.ccq=!0)}),a.ficha=b,document.title="Ficha "+a.ficha.nroficha,a.loading=!1}).error(function(b,c){console.log(b,c),a.loading=!1})},a.getCertificatePDF=function(){a.loadingpdf=!0,f.getCertificatePDF(a.params.ficha).success(function(b){window.URL=window.URL||window.webkitURL;var c=new Blob([b],{type:"application/pdf;base64"}),d=a.ficha.batchnum+".pdf",e=document.createElement("a");e.rel="stylesheet",e.href=window.URL.createObjectURL(c),document.body.appendChild(e),e.style="display: none",e.download=d,e.click(),a.loadingpdf=!1}).error(function(b,c){console.log(b,c),a.loadingpdf=!1})},a.getFichaLCQ()}]),angular.module("arkabPortal").controller("lcqCtrl",["$scope","identityService","appConfig","$location","urlConfig","lcqService","$routeParams","stateService",function(a,b,c,d,e,f,g,h){function i(b){f.getListaFichas(b).success(function(b){a.lista=b,a.loading=!1;var c={params:a.params,report:a.lista};h.setLcqState(c)}).error(function(b,c){console.log(b,c),a.loading=!1})}document.title="LCQ",a.isCordovaApp=isCordovaApp,b.getUserIdentity().lcqpermission.bloqueado&&d.path("/");var j=h.getLcqState();a.params=j.params,a.lista=j.report,a.pesquisa={tipo:"",valor:""},a.loading=!1,f.getTipoAnaliseList().success(function(b){a.tipoAnaliseList=b}).error(function(a,b){console.log(a,b)}),f.getStatusLoteList().success(function(b){a.statusLoteList=b}).error(function(a,b){console.log(a,b)}),a.getListaFichas=function(){a.loading=!0,a.lista=null;var b=angular.copy(a.params);i(b)},a.getFichasListLote=function(){var b={};"lote"==a.pesquisa.tipo?b.lote=$("#inputResult2").val():"item"==a.pesquisa.tipo&&(b.item=$("#inputResult2").val()),i(b),angular.element("#modalLcqPorLote").modal("hide")},a.mostrarPesquisaLote=function(){a.pesquisa={tipo:"lote"},$("#inputResult2").val(""),angular.element("#modalLcqPorLote").modal("show"),isCordovaApp||$("#inputResult2").focus()},a.mostrarPesquisaItem=function(){a.pesquisa={tipo:"item"},angular.element("#modalLcqPorLote").modal("show")},a.navigateTo=function(a){d.path("/lcq/ficha/"+a)},a.tecladoKeyPress=function(b){if(13==b.keyCode){var c=$("#inputResult2").val();angular.element("#modalLcqPorLote").modal("hide"),a.getFichasListLote(c),b.preventDefault()}},a.pesquisaKeyPress=function(b){13==b.keyCode&&(a.getListaFichas(),b.preventDefault())},f.getUserPermissions(b.getUserIdentity().companyUserid).success(function(c){var d=b.getUserIdentity();c&&c.length>0&&(d.lcqpermission=c[0]),b.setUserData(d,!0),a.identity=d}).error(function(a,b){console.log(a)}),a.getCertificatePDF=function(a){a.loadingpdf=!0,a.erropdf=!1,f.getCertificatePDF(a.docentry).success(function(b){window.URL=window.URL||window.webkitURL;var c=new Blob([b],{type:"application/pdf;base64"}),d=a.lote+".pdf",e=document.createElement("a");e.rel="stylesheet",e.href=window.URL.createObjectURL(c),document.body.appendChild(e),e.style="display: none",e.download=d,e.click(),a.loadingpdf=!1}).error(function(b,c){console.log(b,c),a.loadingpdf=!1,a.erropdf=!0})}}]),angular.module("arkabPortal").controller("lcqFichaCtrl",["$scope","identityService","appConfig","$location","urlConfig","lcqService","$routeParams",function(a,b,c,d,e,f,g){function h(b){f.getFichaLCQIntegrationStatus(b).success(function(c){"I"==c.istatus?(a.saving=!1,a.getFichaLCQ()):"E"==c.istatus?(a.saving=!1,a.serverResponse={message:"O servidor retornou uma mensagem de erro:",messages:[c.message]}):h(b)}).error(function(a,b){console.log(a,b)})}document.title="LCQ",a.isCordovaApp=isCordovaApp,b.getUserIdentity().lcqpermission.bloqueado&&d.path("/"),a.statusList=[{code:"Aberto",name:"Aberto"},{code:"Cancelado",name:"Cancelado"},{code:"Fechado",name:"Fechado"}],a.params={apiURL:e.getUrlConfig().baseUrl,identity:b.getUserIdentity(),permission:b.getUserIdentity().lcqpermission,appConfig:c.getAppConfig(),ficha:g.code},f.getUserStatusLoteList().success(function(b){a.statusLoteList=b}).error(function(a,b){console.log(a,b)}),a.filterFase=function(b){a.search=b},a.getFichaLCQ=function(){a.loading=!0,f.getFichaLCQ(a.params.ficha).success(function(b){b.dataemi=formatDateToPtBr(b.dataemi),b.datains=formatDateToPtBr(b.datains),b.moreDetails=!0;var c=a.params.identity.lcqpermission.bugs,d=[];$.each(b.linhas,function(b,e){e.obs&&"*"==e.obs.substring(0,1)&&(e.ccq=!0),e.printquantity=1,e.medias&&a.calcValue(e),e.ccq?c&&d.push(e):d.push(e)}),b.linhas=d,a.ficha=b,document.title="Ficha "+a.ficha.nroficha,a.loading=!1}).error(function(b,c){console.log(b,c),a.loading=!1})},a.getFichaLCQ(),a.selectLinha=function(b){a.ficha.selected=b,a.ficha.selected.p_de&&(a.ficha.selected.f_de=parseFloat(a.ficha.selected.p_de.replace(/,/,"."))),a.ficha.selected.p_ate&&(a.ficha.selected.f_ate=parseFloat(a.ficha.selected.p_ate.replace(/,/,"."))),a.calcValue(a.ficha.selected),angular.element("#modalLcqInput").modal("show")},a.conforme=function(b,c){c||(c=a.ficha.selected),b&&(c.status="A",c.resultado="Conforme"),b||(c.status="R",c.resultado="Não conforme"),c.edited=!0},a.changeLineStatus=function(b){a.ficha.selected.status=b,a.ficha.selected.edited=!0},a.navegacao={next:function(){var b=a.ficha.selected.lineid+1;a.ficha.selected&&$.each(a.ficha.linhas,function(c,d){if(d.lineid==b)return a.selectLinha(d),!1})},previous:function(){var b=a.ficha.selected.lineid-1;a.ficha.selected&&$.each(a.ficha.linhas,function(c,d){if(d.lineid==b)return a.selectLinha(d),!1})}},a.save=function(){a.saving=!0,a.serverResponse=null;var b=angular.copy(a.ficha);b.dataemi&&(b.dataemi=formatPtBrDate(b.dataemi)),b.datains&&(b.datains=formatPtBrDate(b.datains)),console.log("Params",b),f.putFichaLCQ(b).success(function(a){h(a)}).error(function(b,c){console.log(b,c),a.saving=!1})},a.add=function(b){if("-"==b)a.ficha.selected.resultadot=(parseFloat(a.ficha.selected.resultadot.toString().replace(/,/,"."))*-1).toString().replace(".",",");else if(","==b)a.comma=!0;else if("x"==b)a.ficha.selected.resultadot="";else if("bs"==b)a.ficha.selected.resultadot=a.ficha.selected.resultadot.substring(0,a.ficha.selected.resultadot.length-1),a.comma=!1;else{var c=(a.ficha.selected.resultadot||"").toString();a.comma?(c=c+","+b.toString(),a.comma=!1):c+=b.toString(),a.ficha.selected.resultadot=c}},a.resultadoKeyPress=function(b){13==b.keyCode&&(a.addValue(),b.preventDefault())},a.addValue=function(b){b||(b=a.ficha.selected);var c=parseFloat(b.resultadot.replace(",","."));(c||"0"==b.resultadot)&&(b.medias||(b.medias=[]),b.medias.push({valor:c,index:b.medias.length+1})),b.edited=!0,a.calcValue(b)},a.addValue2=function(b){b||(b=a.ficha.selected);var c=$("#inputResult2").val(),d=parseFloat(c.replace(",","."));(d||"0"==c)&&(b.medias||(b.medias=[]),b.medias.push({valor:d,index:b.medias.length+1})),b.edited=!0,a.calcValue(b),$("#inputResult2").val("")},a.calcValue=function(b){if(null==b&&(b=a.ficha.selected),"02"==b.tpdados){if(b.resultfinal||(b.resultfinal=b.resultado.toString()),b.medias||(b.desviopadrao=null,b.coeficiente=null,b.medias=[]),0==b.medias.length&&b.resultado&&(b.resultadot=b.resultado.toString(),b.resultado=null,a.addValue(b)),b.medias.length>1){for(var c=0,d=0;d<b.medias.length;d++)c+=b.medias[d].valor,b.medias[d].index=d+1;b.soma=c,b.resultadom=Math.round(c/b.medias.length*1e3)/1e3,b.resultado=(Math.round(c/b.medias.length*1e3)/1e3).toString().replace(".",",");for(var e=0,d=0;d<b.medias.length;d++)e+=Math.pow(b.medias[d].valor-b.resultadom,2);var f=e/(b.medias.length-1),g=Math.sqrt(f);b.variacao=f,b.desviopadrao=g,b.coeficiente=g/b.resultadom,b.desviominimo=b.resultadom-g,b.desviomaximo=b.resultadom+g}else b.medias.length>0?(b.resultadom=Math.round(1e3*b.medias[0].valor)/1e3,b.resultado=(Math.round(1e3*b.medias[0].valor)/1e3).toString().replace(".",",")):(b.resultadom=0,b.resultado=""),b.desviopadrao=null,b.coeficiente=null,b.desviominimo=null,b.desviomaximo=null,b.variacao=null;a.validarResultado(b),b.resultadot=""}},a.removeMedia=function(b){$.each(a.ficha.selected.medias,function(c,d){if(d.index==b)return a.ficha.selected.medias.splice(c,1),!1}),a.ficha.selected.resultado=null,a.calcValue(a.ficha.selected),0==a.ficha.selected.medias.length&&(a.ficha.selected.status="P"),a.ficha.selected.edited=!0},a.validarResultado=function(a){if("02"==a.tpdados&&("A"!=a.status&&"R"!=a.status||!a.aprovador)){var b=a.resultado;if(b){var c=a.f_de,d=a.f_ate,e=parseFloat(b.toString().replace(/,/,"."));e>=c&&e<=d&&(a.status="A"),(e<c||e>d)&&(a.status="R"),a.edited=!0}}},a.selecionarTodos=function(b,c){var d=c;null==d&&(d=a.ficha.linhas),$.each(d,function(a,c){c.checkforprint=b})},a.imprimir=function(){a.tagmessage="";var b={docentry:a.ficha.docentry,linhas:[]};return $.each(a.ficha.linhas,function(a,c){c.checkforprint&&c.printquantity>0&&b.linhas.push({lineid:c.lineid,quantidade:c.printquantity})}),0==b.linhas.length?void(a.tagmessage="Nenhuma linha selecionada"):void f.postFichaLCQEtiquetas(b).success(function(a){}).error(function(b,c){a.tagmessage=b.Message,console.log(b,c)})},a.selectLinhaAttachment=function(){a.attachment={message:"",file:"",id:0,processing:!1,docentry:a.ficha.docentry,lineid:0},angular.element("#modalLcqAttachment").modal("show")},a.attachment={message:"",file:"",id:0,processing:!1},a.postAttachment=function(){var b=a.attachment.file;return null==b&&(b=""),""==b?void(a.attachment.message="Selecione um arquivo"):(a.attachment.processing=!0,void f.postAttachment(a.ficha.docentry,b).success(function(b){a.ficha.anexos.push(b),a.attachment={message:"",file:"",id:0,processing:!1},a.attachment.processing=!1}).error(function(b,c){a.attachment.message=b.Message,console.log(b),a.attachment.processing=!1}))},a.deleteAttachment=function(b){f.deleteFichaLCQAttachment(b).success(function(c){$.each(a.ficha.anexos,function(c,d){if(d.attachmentid==b)return a.ficha.anexos.splice(c,1),!1})}).error(function(a,b){console.log(a,b)})},a.getCertificatePDF=function(b){a.loadingpdf=!0,f.getCertificatePDF(a.params.ficha).success(function(b){window.URL=window.URL||window.webkitURL;var c=new Blob([b],{type:"application/pdf;base64"}),d=a.ficha.batchnum+".pdf",e=document.createElement("a");e.rel="stylesheet",e.href=window.URL.createObjectURL(c),document.body.appendChild(e),e.style="display: none",e.download=d,e.click(),a.loadingpdf=!1}).error(function(b,c){console.log(b,c),a.loadingpdf=!1})}}]),angular.module("arkabPortal").controller("rememberCtrl",["$scope","identityService","$routeParams","$location","$rootScope","urlConfig","$timeout","appConfig","configStateService",function(a,b,c,d,e,f,g,h,i){function j(){null==a.changeParams.Token?a.view="request":a.view="change"}function k(){d.path("/")}a.message="",a.dataProfile=f.getUrlConfig().dataProfile,a.loadingSettings=!0,a.rememberParams={company:f.getUrlConfig().dataProfile,email:""},a.appConfig=h.getAppConfig(),console.log(a.appConfig),a.appConfig.preparing?b.getWebAPPConfigAS(f.getUrlConfig().dataProfile).success(function(b){i.setAppConfigState(b),a.appConfig=h.getAppConfig(),a.loadingSettings=!1}).error(function(b,c){d.path("/404"),console.log(b,c),a.loadingSettings=!1}):a.loadingSettings=!1,a.urlConfig=f.getUrlConfig(),a.changeParams={NewPassword:"",ConfirmPassword:"",Token:c.token,Email:c.email},null!=a.changeParams.Token&&(a.changeParams.Token=a.changeParams.Token.replace('"',"").replace('"',"")),null!=a.changeParams.Email&&(a.changeParams.Email=a.changeParams.Email.replace('"',"").replace('"',"")),a.changePassword=function(){return a.message="",""==a.changeParams.NewPassword?void(a.message="Informe uma nova senha."):""==a.changeParams.ConfirmPassword?void(a.message="Repita a nova senha."):a.changeParams.NewPassword!=a.changeParams.ConfirmPassword?void(a.message="A senha e a confirmação não coicidem."):(a.loading=!0,void b.resetPassword(a.changeParams).success(function(b){a.message="Senha alterada com sucesso. Aguarde que estou redirecionando você para a tela de login!",console.log(b),g(k,3e3),a.loading=!1}).error(function(b,c){a.message=b,console.log(b),a.loading=!1}))},a.restorePassword=function(){return a.message="",""==a.rememberParams.company?void(a.message="Domínio não informado."):""==a.rememberParams.email?void(a.message="E-mail não informado."):(a.loading=!0,void b.rememberPassword(a.rememberParams).success(function(b){console.log(b),a.message="Verifique o seu e-mail.",a.rememberParams={company:"",email:""},a.loading=!1}).error(function(b,c){console.log(b),a.message=b.Message,a.loading=!1}))},j()}]),angular.module("arkabPortal").controller("rootCtrl",["$rootScope","$location","identityService","appConfig","logService","stateService","$http","$sce","$timeout","urlConfig","configStateService","$window","appConfigKeys","lcqService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){function e(d){a.message="",c.logUserIn(d).success(function(e){c.setUserData(e),1==d.rememberMe&&(l.localStorage.setItem("userName",d.userName),l.localStorage.setItem("password",d.password)),a.params={},isCordovaApp&&navigator.splashscreen.hide(),c.getIndustryPermissions().success(function(d){f.reset(),e.lcqpermission=d.lcqpermission,e.industrypermission=d.industrypermission,c.setUserData(e,!0),a.identity=e,e.isAuthenticated=!0,a.loading=!1,a.requested_url?b.path(a.requested_url):b.path("/")}).error(function(b,c){console.log(b),a.loginData.checkingCookie=!1,a.loginData.isCordovaApp&&navigator.splashscreen.hide(),400==c?"invalid_grant"==b.error&&(a.message=b.error_description):a.message="Conexão recusada.",a.loading=!1})}).error(function(b,c){console.log(b),a.loginData.checkingCookie=!1,a.loginData.isCordovaApp&&navigator.splashscreen.hide(),400==c?"invalid_grant"==b.error&&(a.message=b.error_description):a.message="Conexão recusada.",a.loading=!1})}a.partnerConfig=j.getUrlConfig().partnerConfig,a.appConfig=d.getAppConfig(),a.apiURL=j.getUrlConfig().baseUrl,a.appConfig.wallpaper?a.appConfig.appWallpaper={"background-image":"url("+(a.apiURL+"Adm/GetWallpaper/"+a.appConfig.wallpaper)+")"}:a.appConfig.appWallpaper={"background-image":"url(config/wp.jpg)"},a.footerText=h.trustAsHtml(d.getAppConfig().footerText),a.loginPageCompanyName=d.getAppConfig().loginPageCompanyName,a.userCanLogin=!0,c.resetUserData(),a.identity=c.getUserIdentity();var g=l.localStorage.getItem("userName"),k=l.localStorage.getItem("password"),m=function(){g&&k?(a.loginData.userName=g,a.loginData.password=k,e(a.loginData)):i(function(){a.loginData.checkingCookie=!1,a.loginData.isCordovaApp&&navigator.splashscreen.hide()})};a.submitLogin=function(){a.loading=!0;var b="Nome do usuário ou senha é inválido";return void 0===a.loginData.userName||void 0===a.loginData.password?(a.message=b,console.error(b),void(a.loading=!1)):""==a.loginData.userName||""==a.loginData.password?(a.message=b,console.error(b),void(a.loading=!1)):void e(a.loginData)},a.logOut=function(){c.resetUserData(),a.NotificationStarted=!1,a.notificationlist=[],l.localStorage.removeItem("userName"),l.localStorage.removeItem("password"),a.requested_url="",b.path("/login")},a.checkAvatar=function(){null!=a.loginData.userName&&(a.loginData.userNameForImage=a.loginData.userName.replace(".","!").replace(".","!").replace(".","!").replace(".","!").replace(".","!"))},a.go=function(a){b.path(a)},a.notifyMe=function(c,d,e,f,g){try{if(isCordovaApp)"Notification"in window&&Notification.requestPermission(function(h){if("granted"===h){var i=new Notification(d,{tag:(new Date).toString(),icon:c,body:e});i.onshow=function(){console.log("show")},i.onclose=function(){console.log("close")},i.onclick=function(){console.log("notification click");try{g&&a.confirmread(g),a.confirmnotification(),console.log("navigate to original:",f),f=f.replace("#",""),console.log("navigate to final:",f),b.path(f),window.focus()}catch(a){console.log(a)}}}else console.log("Cordova notification not authorized")});else{if(!Notification)return console.log("Este browser não é compatível com notificações no desktop. Sugerimos a utilização do chrome."),void alert("Este browser não é compatível com notificações no desktop. Sugerimos a utilização do chrome.");if(c=c?"img/icons/"+c:a.apiURL+"Adm/GetLogo/"+a.appConfig.logo+"-128px","granted"!==Notification.permission)Notification.requestPermission();else{var h=new Notification(d,{icon:c,body:e});f&&(h.onclick=function(){g&&a.confirmread(g),a.confirmnotification(),f=f.replace("#",""),b.path(f),window.focus()})}}}catch(a){console.log(a)}},isCordovaApp&&(a.closeApp=function(){confirm("Tem certeza que deseja encerrar a aplicação? Você deixará de receber as notificações.")&&navigator.app.exitApp()}),document.addEventListener("DOMContentLoaded",function(){"granted"!==Notification.permission&&Notification.requestPermission()}),a.$on("$locationChangeStart",function(a,b,c){$("div.modal").modal("hide"),$(".modal").modal("hide")}),m()}a.loading=!1,a.loginData={userName:"",password:"",latitude:"",longitude:"",ip:"",agree:!0,rememberMe:!1,checkingCookie:!0,checkingConfig:!0,userNameForImage:"img",isCordovaApp:isCordovaApp},a.appConfigKeys=m,a.actualYear=(new Date).getFullYear(),j.valid()?c.getWebAPPConfigAS(j.getUrlConfig().dataProfile).success(function(b){a.loginData.checkingConfig=!1,k.setAppConfigState(b),o()}).error(function(a,c){b.path("/404"),console.log(a,c)}):(console.log("configuração inválida"),b.path("/setup"))}]),angular.module("arkabPortal").controller("setupCtrl",["$scope","$location","$window","urlConfig","$timeout","$routeParams","$http","$sce",function(a,b,c,d,e,f,g,h){function i(b){a.error=h.trustAsHtml(b),e(function(){a.error=""},3e4)}if(a.message="",a.config=d.getUrlConfig(),isCordovaApp)try{navigator.splashscreen.hide()}catch(a){}d.valid()&&!f.ignore&&b.path("/login"),a.config.protocol||(console.log("protocol"),a.config.protocol="https"),a.config.baseUrl||(a.config.baseUrl="portal.laborclin.com.br/api"),a.config.dataProfile||(a.config.dataProfile="SBO_Laborclin"),a.config&&a.config.baseUrl&&(a.config.baseUrl=a.config.baseUrl.replace(/^(https|http):\/\//,"").replace(/\/api\/$/,"")),a.protocols=[{code:"http"},{code:"https"}],a.cancelScan=function(){$("#appSetup").css({opacity:1}),QRScanner.destroy(function(a){console.log(a)})},a.turnLight=function(){a.light?(a.light=!1,QRScanner.disableLight(function(a,b){a&&navigator.notification.alert(a,function(){},"Erro","OK")})):(a.light=!0,QRScanner.enableLight(function(a,b){a&&navigator.notification.alert(a,function(){},"Erro","OK")}))},a.scanConfig=function(){try{console.log("QRScanner.getStatus before"),navigator.notification.alert("Para configurar o seu aplicativo, aponte a câmera para o código QRCode disponível no Portal de Vendas CRMSAP.",function(){},"Configuração","Entendi"),QRScanner.getStatus(function(b){a.scannerStatus=b,console.log("QRScanner.getStatus result",b),!b.authorized&&b.canOpenSettings&&confirm("Would you like to enable QR code scanning? You can allow camera access in your settings.")&&QRScanner.openSettings()}),console.log("scanstart"),QRScanner.scan(function(b,c){if(console.log(b,c),$("#arkabPortalApp").fadeIn(1e3,function(){$("#arkabPortalApp").css({opacity:.5})}),b)navigator.notification.alert(b,function(){},"Erro","Ok");else if(c){var d=c.split("|"),f="",g="",h="",i="",j="";try{f=d[0]}catch(a){}try{g=d[1]}catch(a){}try{h=d[2]}catch(a){}try{i=d[3]}catch(a){}try{j=d[4]}catch(a){}e(function(){a.config.baseUrl=g,a.config.protocol=f,a.config.dataProfile=h,a.config.user=i,a.config.password=j,a.validate(!0)}),console.log(d)}QRScanner.destroy(function(a){console.log(a)})}),QRScanner.show(),$("#arkabPortalApp").fadeOut(500,function(){$("#arkabPortalApp").css({opacity:0})})}catch(a){try{alert(a)}catch(a){}console.log(a)}},a.validate=function(b){if(a.error="",a.message="",a.config.error1=!1,a.domainInfo=null,!a.config.baseUrl)return void i("Informe o endereço da API.");if(!a.config.dataProfile)return void i("Informe o domínio.");a.config.baseUrl=a.config.baseUrl.replace(/^(https|http):\/\//,"");var c=angular.copy(a.config);c.baseUrl=c.protocol+"://"+a.config.baseUrl+"/api/",console.log(c),a.validating=!0;try{g({url:c.baseUrl+"Adm/GetDomainInfo/"+c.dataProfile,method:"GET"}).success(function(d){a.apiURL=c.baseUrl,a.domainInfo=d,a.validating=!1,b&&a.saveConfig(b)}).error(function(b,c){i(b),console.log(b,c),
a.validating=!1})}catch(b){i(b),console.log(b),a.validating=!1}},a.saveConfig=function(b){if(a.error="",a.message="",a.config.error1=!1,!a.config.baseUrl)return void i("Informe o endereço da API.");if(!a.config.dataProfile)return void i("Informe o domínio.");a.config.baseUrl=a.config.baseUrl.replace(/^(https|http):\/\//,"");var d=angular.copy(a.config);d.baseUrl=d.protocol+"://"+a.config.baseUrl+"/api/",console.log(a.domainInfo),console.log(d),console.log("analytics",a.domainInfo.analytics),c.localStorage.setItem("protocol",d.protocol),c.localStorage.setItem("baseUrl",d.baseUrl),c.localStorage.setItem("dataProfile",d.dataProfile),c.localStorage.setItem("googleAnalyticsChild",a.domainInfo.analytics),a.config.user&&c.localStorage.setItem("userName",a.config.user),a.config.password&&c.localStorage.setItem("password",a.config.password),a.restarting=!0,navigator.notification.alert("Para terminar a configuração, a aplicação será finalizada. Por favor, abra o CRMSAP novamente.",function(){e(function(){if(isCordovaApp)try{navigator.app.exitApp()}catch(a){console.log(a)}else window.close()},2e3)},"Atenção","Ok, entendi"),a.message="Configuração salva. A aplicação será fechada, por favor abra novamente."}}]),angular.module("arkabPortal").controller("temperaturesCtrl",["$scope","thermometerService","$timeout","urlConfig","$routeParams",function(a,b,c,d,e){document.title="Temperaturas",a.thermometerName=e.thermometerName,a.apiURL=d.getUrlConfig().baseUrl,a.getTemperatures=function(d){a.temperaturesPerHourChart=null,a.loading=!0,b.getTemperatures(d).success(function(b){var d=[],e=[];$.each(b,function(a,b){var c=-1*(new Date).getTimezoneOffset()*6e4;e.push([new Date(b.createdate).getTime()+c,b.temperature])}),a.temperatures=b,a.temperaturesPerHourChart={ranges:d,temperatures:e},a.loading=!1,c(function(){"function"==typeof a.getTemperatures&&a.getTemperatures(a.thermometerName)},3e5)}).error(function(b,c){console.log(b,c),a.loading=!1})},a.getTemperatures(a.thermometerName),a.$on("$destroy",function(){a.getTemperatures=null})}]),angular.module("arkabPortal").controller("thermometerCtrl",["$scope","thermometerService","$timeout","urlConfig","$routeParams",function(a,b,c,d,e){function f(){a.getTemperature(a.thermometerName,!0),a.getTemperaturePerHour(a.thermometerName),c(function(){"function"==typeof f&&a.thermometerName&&f()},1e4)}function g(){a.getThermometers(),c(function(){"function"!=typeof g||a.thermometerName||g()},1e4)}document.title="Termômetros",a.thermometerName=e.thermometerName,a.temperature=null,a.apiURL=d.getUrlConfig().baseUrl,a.picindex=-1,a.images=[],a.getTemperature=function(c,d){b.getTemperature(c).success(function(b){a.images.push({index:a.images.length+1,picture:b.picture}),a.temperature=b}).error(function(a,b){console.log(a,b)})},a.getTemperaturePerHour=function(c){b.getTemperaturePerHour(c).success(function(b){a.temperaturePerHour=b;var c=[],d=[];$.each(b,function(a,b){var e=-1*(new Date).getTimezoneOffset()*6e4;c.push([new Date(b.createdate).getTime()+e,b.mintemp,b.maxtemp]),d.push([new Date(b.createdate).getTime()+e,b.avgtemp])}),a.temperaturesPerHourChart=null,a.temperaturesPerHourChart={ranges:c,temperatures:d}}).error(function(a,b){console.log(a,b)})},a.getThermometers=function(){b.getThermometers().success(function(b){a.thermometers=b}).error(function(a,b){console.log(a,b)})},a.thermometerName?f():g(),a.$on("$destroy",function(){f=null,g=null})}]),angular.module("arkabPortal").controller("thermometerSetupCtrl",["$scope","thermometerService","$timeout","urlConfig","$routeParams",function(a,b,c,d,e){document.title="Configurar termômetro",a.thermometerName=e.thermometerName,a.apiURL=d.getUrlConfig().baseUrl,a.speech_variations=[{code:1,name:"Variação 1"},{code:2,name:"Variação 2"},{code:3,name:"Variação 3"},{code:4,name:"Variação 4"},{code:5,name:"Variação 5"}],a.getThermometer=function(c){a.loading=!0,b.getThermometer(c).success(function(b){a.thermometer=b,a.loading=!1}).error(function(b,c){console.log(b,c),a.loading=!1})},a.putThermometer=function(a){b.putThermometer(a).success(function(a){console.log(a)}).error(function(a,b){console.log(a,b)})},a.getThermometer(a.thermometerName)}]),angular.module("arkabPortal").controller("unauthorizedCtrl",["$scope",function(a){}]),angular.module("arkabPortal").controller("userProfileCtrl",["$scope","$rootScope","identityService","logService","urlConfig","appConfig",function(a,b,c,d,e,f){function g(){a.changePasswordMessage=""}a.identity=c.getUserIdentity(),a.userProfileView="userInfo",document.title="Perfil do usuário",a.options={editable:!1,lang:"pt-BR",popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]}},a.userProfile={loading:!1,message:"i'm here",avatar:"",apiurl:e.getUrlConfig().baseUrl},a.changePasswordModel={OldPassword:"",NewPassword:"",ConfirmPassword:""},a.appConfig=f.getAppConfig(),a.onReady=function(){console.log("hi")},a.changeView=function(b){a.userProfileView=b},a.postAvatar=function(){a.avatarMessage="";var b=a.userProfile.avatar;return null==b&&(b=""),""==b?void(a.avatarMessage="Selecione um arquivo"):void c.postAvatar(b).success(function(a){c.setUserAvatar(a)}).error(function(b,c){a.avatarMessage=b,console.log(b)})},a.postSignaturePicture=function(){a.signaturePictureMessage="";var b=a.userProfile.avatar;return null==b&&(b=""),""==b?void(a.signaturePictureMessage="Selecione um arquivo"):void c.postSignaturePicture(b).success(function(b){console.log(b),a.identity.signature.picture=b}).error(function(b,c){a.signaturePictureMessage=b,console.log(b)})},a.putUserSignature=function(){console.log(a.identity.signature),c.putUserSignature(a.identity.signature).success(function(a){d.info("putUserSignature OK")}).error(function(a,b){d.xhrerror("identityService.putUserSignature",a,b)})},a.changePassword=function(){a.changePasswordMessage="",a.changePasswordLoading=!0,c.changePassword(a.changePasswordModel).success(function(b){a.changePasswordMessage="Senha alterada com sucesso.",a.changePasswordModel.OldPassword="",a.changePasswordModel.NewPassword="",a.changePasswordModel.ConfirmPassword="",a.changePasswordLoading=!1,setTimeout(g,2500)}).error(function(b,c){console.log(b.ModelState),a.changePasswordMessage=b.Message,a.changePasswordLoading=!1})},a.putUserSmtp=function(){return a.smtpMessage="",a.userSmtp.email?a.userSmtp.nome?a.userSmtp.smtp_host?a.userSmtp.smtp_port?a.userSmtp.username?a.userSmtp.password?void c.putUserSmtp(a.userSmtp).success(function(b){a.smtpMessage="Alterado com sucesso."}).error(function(b,c){a.smtpMessage=b,console.log(b)}):void(a.smtpMessage="Informe a senha."):void(a.smtpMessage="Informe o nome do usuário."):void(a.smtpMessage="Informe a porta do servidor SMTP."):void(a.smtpMessage="Informe o endereço do servidor SMTP."):void(a.smtpMessage="Informe o nome para exibição do e-mail."):void(a.smtpMessage="Informe o endereço de e-mail.")},a.init=function(){c.getUserSignature().success(function(b){a.identity.signature=b}).error(function(a,b){console.log(a,b)}),c.getUserSmtp().success(function(b){a.userSmtp=b,a.smtpMessage=""}).error(function(b,c){console.log(b),a.smtpMessage=b})},a.init()}]),angular.module("arkabPortal").filter("addressTypeFilter",function(){return function(a){return a?"B"==a.toUpperCase()?"Cobrança":"S"==a.toUpperCase()?"Entrega":"":""}}),angular.module("arkabPortal").filter("queueStatusFilter",function(){return function(a){return a?"A"==a.toUpperCase()?"Ativo":"E"==a.toUpperCase()?"Erro":"I"==a.toUpperCase()?"Integrado":"X"==a.toUpperCase()?"Anulado":a:""}}),angular.module("arkabPortal").filter("contentStatusFilter",function(){return function(a){return a?"A"==a.toUpperCase()?"Publicado":"I"==a.toUpperCase()?"Inativo":"D"==a.toUpperCase()?"Em edição":a:""}}),angular.module("arkabPortal").filter("priorityFilter",function(){return function(a){return a?"0"==a.toString()?"Baixa":"1"==a.toString()?"Média":"2"==a.toString()?"Alta":a:"Baixa"}}),angular.module("arkabPortal").filter("monthNameFilter",function(){return function(a){return a?"1"==a.toString()?"Janeiro":"2"==a.toString()?"Fevereiro":"3"==a.toString()?"Março":"4"==a.toString()?"Abril":"5"==a.toString()?"Maio":"6"==a.toString()?"Junho":"7"==a.toString()?"Julho":"8"==a.toString()?"Agosto":"9"==a.toString()?"Setembro":"10"==a.toString()?"Outubro":"11"==a.toString()?"Novembro":"12"==a.toString()?"Dezembro":a:""}}),angular.module("arkabPortal").filter("monthShortNameFilter",function(){return function(a){return a?"1"==a.toString()?"Jan":"2"==a.toString()?"Fev":"3"==a.toString()?"Mar":"4"==a.toString()?"Abr":"5"==a.toString()?"Mai":"6"==a.toString()?"Jun":"7"==a.toString()?"Jul":"8"==a.toString()?"Ago":"9"==a.toString()?"Set":"10"==a.toString()?"Out":"11"==a.toString()?"Nov":"12"==a.toString()?"Dez":a:""}}),angular.module("arkabPortal").filter("monthFilter",function(){return function(a){return a?1==a.length?"0"+a:a:""}}),angular.module("arkabPortal").filter("replaceZeroFilter",function(){return function(a){return a?"0"==a?"":a:""}}),angular.module("arkabPortal").filter("leftZeros",function(){return function(a,b){if(!a)return"";if(!b)return a;var c=a.toString().length,d="";if(c<b)for(var e=0;e<b-c;e++)d+="0";return d+a}}),angular.module("arkabPortal").filter("inStockFilter",["appConfig",function(a){return function(b,c){var d=c;return void 0!=d&&null!=d&&""!=d&&"Prev."!=d&&"Prev. "!=d||(d="Indisponível"),b?a.getAppConfig().showInStockQuantity?b>0?b:d:b>0?"Sim":d:d}}]),angular.module("arkabPortal").filter("yesNoFilter",function(){return function(a){return a?"Sim":"Não"}}),angular.module("arkabPortal").filter("yesFilter",function(){return function(a){return a?"Sim":""}}),angular.module("arkabPortal").filter("replaceDotByPipe",function(){return function(a){return a?a.replace(".","%2E").replace(".","%2E").replace(".","%2E").replace(".","%2E"):""}}),angular.module("arkabPortal").filter("replaceBrackets",function(){return function(a){return a?a.replace(/[\[\]']+/g,"").replace(/,/g,", "):""}}),angular.module("arkabPortal").filter("objTypeFilter",function(){return function(a){return a?"13"==a?"Nota fiscal":"15"==a?"Entrega":"17"==a?"Pedido de venda":"23"==a?"Orçamento":void 0:""}}),angular.module("arkabPortal").filter("objTypeShortFilter",function(){return function(a){return a?"13"==a||"Nota fiscal"==a?"NF":"15"==a||"Entrega"==a?"EN":"17"==a||"Pedido de venda"==a?"PV":"23"==a||"Orçamento"==a?"OR":void 0:""}}),angular.module("arkabPortal").filter("treeTypeFilter",function(){return function(a,b){return a?"S"==a?"KIT "+(b?"fechado":"aberto"):"P"==a?"Produção":"T"==a?"Modelo":"N"==a?"Revenda":"?":""}}),angular.module("arkabPortal").filter("opportunityStatusFilter",function(){return function(a){return a?"O"==a?"Aberto":"W"==a?"Ganhou":"L"==a?"Perdeu":"?":""}}),angular.module("arkabPortal").filter("flagFilter",["$sce",function(a){return function(b){return b?b.indexOf("Dólar comercial")>=0?a.trustAsHtml('<img src="img/icons/dollar-icon.png" vAlign="absmiddle" style="width: 16px; height: 16px;" alt="'+b+'" /> '):b.indexOf("Dólar Canadense")>=0?a.trustAsHtml('<img src="img/icons/can-icon.png" vAlign="absmiddle" style="width: 16px; height: 16px;" alt="'+b+'" /> '):b.indexOf("Euro")>=0?a.trustAsHtml('<img src="img/icons/euro-icon.png" vAlign="absmiddle" style="width: 16px; height: 16px;" alt="'+b+'" /> '):b:""}}]),angular.module("arkabPortal").filter("revertListFilter",function(){return function(a){return a.slice().reverse()}}),angular.module("arkabPortal").filter("firstNameFilter",function(){return function(a){return a.split(" ")[0]}}),angular.module("arkabPortal").filter("absValueFilter",["$sce",function(a){return function(a){return a<0?a*-1:a}}]),angular.module("arkabPortal").filter("blockTypeRoleFilter",function(){return function(a){return a?"G"==a.toUpperCase()?"Gerente":"S"==a.toUpperCase()?"Supervisor":"A"==a.toUpperCase()?"Assistente":"C"==a.toUpperCase()?"Customizado":a:""}}),angular.module("arkabPortal").filter("removePoint",function(){return function(a){return a?a.replace(/\.|\-|ltda|LTDA|Ltda/g," "):""}}),angular.module("arkabPortal").filter("removeCardCode",function(){return function(a,b){return a?a.replace(b," "):""}}),angular.module("arkabPortal").filter("formatFoneLink",function(){return function(a,b){return a?"+55"+b+a.replace(/^0/,"").replace(/\(|\)|\.|\-/g,""):""}}),angular.module("arkabPortal").filter("encodeURI",function(){return function(a){return a?a.replace(/\//,""):""}}),angular.module("arkabPortal").filter("statusLinhaLCQ",function(){return function(a){return a?"P"==a?"Pendente":"A"==a?"Aprovado":"R"==a?"Reprovado":a:null}}),angular.module("arkabPortal").filter("ordertype",function(){return function(a){return a?"W"==a?"Produção":"P"==a?"Compra":a:null}}),angular.module("arkabPortal").filter("removeAsterisk",function(){return function(a){return a?"*"==a?"":"*"==a.substring(0,1)?a.substring(1,a.length):a:null}}),angular.module("arkabPortal").filter("cepFilter",function(){return function(a){if(!a)return"";if(a.length<5)return a;a=a.replace(".","").replace("-","");var b=a.substring(0,5)+"-"+a.substring(5,8);return b}}),angular.module("arkabPortal").filter("cnpjCpfFilter",function(){return function(a){return a?(a=a.replace(".","").replace("/","").replace("-","").replace(".","").replace(".",""),11==a.length?a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11):14==a.length?a.substring(0,2)+"."+a.substring(2,5)+"."+a.substring(5,8)+"/"+a.substring(8,12)+"-"+a.substring(12,14):a):""}}),angular.module("arkabPortal").filter("ellipsisFilter",function(){return function(a,b){if(!a)return"";if(a.length<=b)return a;var c=a.substring(0,b||2)+"...";return c}}),angular.module("arkabPortal").service("activityService",["$http","urlConfig","$q",function(a,b,c){this.getCalendar=function(c){var d=JSON.stringify(c.startdate).replace(/"/gi,""),e=JSON.stringify(c.enddate).replace(/"/gi,"");return a({url:b.getUrlConfig().baseUrl+"Activity/GetCalendar?start="+d+"&end="+e,method:"GET"})},this.getCalendarEvents=function(){return a({url:b.getUrlConfig().baseUrl+"Activity/GetCalendarEvents",method:"GET"})},this.getCalendarEventsFromSeller=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetCalendarEventsFromSeller/"+c,method:"GET"})},this.getCalendarEvent=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetCalendarEvent",method:"GET",params:{id:c}})},this.getCalendarHistory=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetCalendarHistory",method:"GET",params:{id:c}})},this.getActivityActionList=function(){return a({url:b.getUrlConfig().baseUrl+"Activity/GetActivityActionList",method:"GET"})},this.getActivityObjTypeList=function(){return a({url:b.getUrlConfig().baseUrl+"Activity/GetActivityObjTypeList",method:"GET"})},this.getActivityTypeList=function(){return a({url:b.getUrlConfig().baseUrl+"Activity/GetActivityTypeList",method:"GET"})},this.getActivitySubjectList=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetActivitySubjectList",method:"GET",params:{type:c}})},this.getActivityAttendUserList=function(){return a({url:b.getUrlConfig().baseUrl+"Activity/GetActivityAttendUserList",method:"GET"})},this.getActivityContactList=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetActivityContactList",method:"GET",params:{cardcode:c}})},this.putActivity=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/putActivity",method:"PUT",data:c})},this.getActivityIntegrationStatus=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetActivityIntegrationStatus",method:"GET",params:{id:c}})},this.startNewActivity=function(c,d,e){return null==d&&(d=""),null==e&&(e=""),""==d&&""==e||""!=d&&""!=e||(d="",e=""),a(""!=d?{url:b.getUrlConfig().baseUrl+"Activity/StartNewActivity/"+c+"/"+d+"/"+e,method:"GET"}:{url:b.getUrlConfig().baseUrl+"Activity/StartNewActivity/"+c,method:"GET"})},this.getactivityprofiles=function(){return a({url:b.getUrlConfig().baseUrl+"Activity/Getactivityprofiles",method:"GET"})},this.putActivityProfile=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/PutActivityProfile",method:"PUT",data:c})},this.deleteActivityProfile=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/DeleteActivityProfile/"+c,method:"DELETE"})},this.getContentListByStatus=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetContentListByStatus/"+c,method:"GET"})},this.getContentList=function(){return a({url:b.getUrlConfig().baseUrl+"Activity/GetContentList",method:"GET"})},this.getContent=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetContent/"+c,method:"GET"})},this.getContentForEditing=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetContentForEditing/"+c,method:"GET"})},this.postContent=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/PostContent",method:"POST",data:c})},this.putContentStatus=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Activity/PutContentStatus/"+c+"/"+d,method:"PUT"})},this.deleteContent=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/DeleteContent/"+c,method:"DELETE"})},this.getLastExchangeRates=function(){return a({url:b.getUrlConfig().baseUrl+"Activity/GetLastExchangeRates",method:"GET"})},this.getExchangeRates=function(){return a({url:b.getUrlConfig().baseUrl+"Activity/GetExchangeRates",method:"GET"})},this.getActivityUDF=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetActivityUDF/"+c,method:"GET"})},this.putActivityUDF=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Order/PutActivityUDF/"+c,method:"PUT",data:d})},this.getActivityAttachmentDownload=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Activity/GetActivityAttachmentDownload/"+c+"/"+d,method:"GET",responseType:"arraybuffer"})},this.postActivityAttachment=function(c,d){var e=new FormData;return e.append("file",d),a.post(b.getUrlConfig().baseUrl+"Activity/PostActivityAttachment?clgcode="+c+"&filename="+d.name,e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.deleteActivityAttachment=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Activity/DeleteActivityAttachment/"+c+"/"+d,method:"DELETE"})},this.getPostActivityAttachmentIntegrationStatus=function(c){return a({url:b.getUrlConfig().baseUrl+"Activity/GetPostActivityAttachmentIntegrationStatus/"+c,method:"GET"})},this.getActivityAttachments=function(c){return a({url:b.getUrlConfig().baseUrl+"ACtivity/GetActivityAttachments/"+c,method:"GET"})}}]),angular.module("arkabPortal").service("admService",["$http","urlConfig",function(a,b){this.getUsers=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetUsers",method:"GET"})},this.getGroups=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetGroups",method:"GET"})},this.postGroup=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PostGroup/"+c,method:"POST"})},this.putGroup=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutGroup",method:"PUT",data:c})},this.deleteGroup=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/DeleteGroup/"+c,method:"DELETE"})},this.getUser=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/GetUser/"+c.userid,method:"GET"})},this.getUserProfile=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/GetUserProfile/"+c,method:"GET"})},this.saveUserProfile=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/SaveUserProfile",method:"PUT",data:c})},this.getUserIntegrationStatus=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/GetUserIntegrationStatus/"+c,method:"GET"})},this.getSalesPersonList=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetSalesPersonList",method:"GET"})},this.getRolesList=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetIndustryRolesList",method:"GET"})},this.getTeamsList=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetTeamsList",method:"GET"})},this.getUserLog=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/GetUserLog/"+c.userid+"/"+c.year+"/"+c.month,method:"GET"})},this.getPerformanceLog=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/GetPerformanceLog/"+c+"/"+d,method:"GET"})},this.getUDF=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetUDF",method:"GET"})},this.putUDF=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutUDF",method:"PUT",data:c})},this.postLicense=function(c){var d=new FormData;return d.append("file",c),a.post(b.getUrlConfig().baseUrl+"Adm/PostLicense",d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.getLicense=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetLicense",method:"GET"})},this.putUserLicense=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutUserLicense?licenseUserId="+c,method:"PUT"})},this.removeUserLicense=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/RemoveUserLicense?licenseUserId="+c,method:"DELETE"})},this.getRoles=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetRoles",method:"GET"})},this.getProductsGroups=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetProductsGroups",method:"GET"})},this.putProductGroup=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutProductGroup",method:"PUT",data:c})},this.getAdmProducts=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetAdmProducts",method:"GET"})},this.putAdmProduct=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutAdmProduct",method:"PUT",data:c})},this.putUserAuthorization=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutUserAuthorization",method:"PUT",data:c})},this.getFreightRegions=function(c){return c||(c=0),a({url:b.getUrlConfig().baseUrl+"Adm/GetFreightRegions/"+c,method:"GET"})},this.getFreightStates=function(c){return c||(c=0),a({url:b.getUrlConfig().baseUrl+"Adm/GetFreightStates/"+c,method:"GET"})},this.getFreightStateCities=function(c,d){return c||(c=0),a({url:b.getUrlConfig().baseUrl+"Adm/GetFreightStateCities/"+c+"/"+d,method:"GET"})},this.getFreightRegion=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/GetFreightRegion/"+c,method:"GET"})},this.putFreightRegionCitiesByText=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutFreightRegionCitiesByText",method:"PUT",data:c})},this.deleteFreightPriceListRegion=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/DeleteFreightPriceListRegion/"+c+"/"+d,method:"DELETE"})},this.deleteFreightRegionCity=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/DeleteFreightRegionCity/"+c+"/"+d,method:"DELETE"})},this.deleteFreightRegionCities=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/DeleteFreightRegionCities/"+c,method:"POST",data:d})},this.deleteFreightPriceList=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/DeleteFreightPriceList/"+c,method:"DELETE"})},this.postNewRegion=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PostNewRegion?newRegionName="+c,method:"POST"})},this.putRegion=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/PutRegion?id="+c+"&name="+d,method:"PUT"})},this.deleteRegion=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/DeleteRegion?id="+c,method:"DELETE"})},this.getFreightPriceLists=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetFreightPriceLists",method:"GET"})},this.getFreightPriceList=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/GetFreightPriceList/"+c,method:"GET"})},this.putRegionsInPriceList=function(c){return console.log("putRegionsInPriceList",c),a({url:b.getUrlConfig().baseUrl+"Adm/PutRegionsInPriceList",method:"PUT",data:c})},this.putCitiesInPriceList=function(c){return console.log("putCitiesInPriceList",c),a({url:b.getUrlConfig().baseUrl+"Adm/PutCitiesInPriceList",method:"PUT",data:c})},this.getPriceListRegionTaxes=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/GetPriceListRegionTaxes/"+c+"/"+d,method:"GET"})},this.putTaxesInPriceListRegion=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutTaxesInPriceListRegion",method:"PUT",data:c})},this.putFreightPriceListRegion=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/PutFreightPriceListRegion/"+c,method:"PUT",data:d})},this.deleteFreightPriceListRange=function(c,d,e){return a({url:b.getUrlConfig().baseUrl+"Adm/DeleteFreightPriceListRange/"+c+"/"+d+"/"+e,method:"DELETE"})},this.deleteFreightPriceListTax=function(c,d,e){return a({url:b.getUrlConfig().baseUrl+"Adm/DeleteFreightPriceListTax/"+c+"/"+d+"/"+e,method:"DELETE"})},this.postFreightPriceList=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PostFreightPriceList/"+c,method:"POST"})},this.putFreightPriceList=function(c){var d=angular.copy(c);return""==d.startdate?d.startdate=null:d.startdate=formatPtBrDate(d.startdate),""==d.enddate?d.enddate=null:d.enddate=formatPtBrDate(d.enddate),a({url:b.getUrlConfig().baseUrl+"Adm/PutFreightPriceList",method:"PUT",data:d})},this.getFreightTaxes=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetFreightTaxes",method:"GET"})},this.deleteFreightTax=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/DeleteFreightTax/"+c,method:"DELETE"})},this.postFreightTax=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/PostFreightTax/"+c+"/"+d,method:"POST"})},this.putFreightTax=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutFreightTax",method:"PUT",data:c})},this.putFreightRegionCityDeadLine=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/PutFreightRegionCityDeadLine/"+c+"/"+d.state+"/"+d.city+"/"+d.deadline,method:"PUT"})},this.getIndustryCList=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetIndustryCList",method:"GET"})},this.deleteIndustryCProduct=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/deleteIndustryCProduct/"+c+"/"+d,method:"DELETE"})},this.putIndustryCProduct=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/putIndustryCProduct/"+c+"/"+d,method:"PUT"})},this.getIndustryCProducts=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/GetIndustryCProducts/"+c,method:"GET"})},this.getBlockTypeList=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetBlockTypeList",method:"GET"})},this.putBlock=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutBlock",method:"PUT",data:c})},this.putBlockUser=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/PutBlockUser/"+c+"/"+d,method:"PUT"})},this.deleteBlockUser=function(c,d){return a({url:b.getUrlConfig().baseUrl+"Adm/DeleteBlockUser/"+c+"/"+d,method:"DELETE"})},this.getUsages=function(){return a({url:b.getUrlConfig().baseUrl+"Adm/GetUsages",method:"GET"})},this.putUsage=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/PutUsage",method:"PUT",data:c})},this.postImage=function(c){var d=new FormData;return d.append("file",c),a.post(b.getUrlConfig().baseUrl+"Adm/PostLogo",d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.postWallpaper=function(c){var d=new FormData;return d.append("file",c),a.post(b.getUrlConfig().baseUrl+"Adm/PostWallpaper",d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.getUserBranches=function(c){return a({url:b.getUrlConfig().baseUrl+"Adm/GetUserBranches/"+c,method:"GET"})}}]),angular.module("arkabPortal").service("cnpjCpfService",function(){function a(a){if(a=a.replace(/[^\d]+/g,""),""==a)return!1;if(14!=a.length)return!1;if("00000000000000"==a||"11111111111111"==a||"22222222222222"==a||"33333333333333"==a||"44444444444444"==a||"55555555555555"==a||"66666666666666"==a||"77777777777777"==a||"88888888888888"==a||"99999999999999"==a)return!1;for(tamanho=a.length-2,numeros=a.substring(0,tamanho),digitos=a.substring(tamanho),soma=0,pos=tamanho-7,i=tamanho;i>=1;i--)soma+=numeros.charAt(tamanho-i)*pos--,pos<2&&(pos=9);if(resultado=soma%11<2?0:11-soma%11,resultado!=digitos.charAt(0))return!1;for(tamanho+=1,numeros=a.substring(0,tamanho),soma=0,pos=tamanho-7,i=tamanho;i>=1;i--)soma+=numeros.charAt(tamanho-i)*pos--,pos<2&&(pos=9);return resultado=soma%11<2?0:11-soma%11,resultado==digitos.charAt(1)}function b(a){var b,c;if(b=0,"00000000000"==a||"11111111111"==a||"22222222222"==a||"33333333333"==a||"44444444444"==a||"55555555555"==a||"66666666666"==a||"77777777777"==a||"88888888888"==a||"99999999999"==a)return!1;for(i=1;i<=9;i++)b+=parseInt(a.substring(i-1,i))*(11-i);if(c=10*b%11,10!=c&&11!=c||(c=0),c!=parseInt(a.substring(9,10)))return!1;for(b=0,i=1;i<=10;i++)b+=parseInt(a.substring(i-1,i))*(12-i);return c=10*b%11,10!=c&&11!=c||(c=0),c==parseInt(a.substring(10,11))}this.validate=function(c){c=c.replace(".","").replace("/","").replace("-","").replace(".","").replace(".","");var d={valid:!1,formatted:"",unformatted:c,message:""};return 11==c.length?(d.valid=b(c),d.valid?(d.formatted=c.substring(0,3)+"."+c.substring(3,6)+"."+c.substring(6,9)+"-"+c.substring(9,11),d):(d.message="Número de CPF inválido.",d)):14==c.length?(d.valid=a(c),d.valid?(d.formatted=c.substring(0,2)+"."+c.substring(2,5)+"."+c.substring(5,8)+"/"+c.substring(8,12)+"-"+c.substring(12,14),d):(d.message="Número de CNPJ inválido.",d)):(d.message="Formato da identificação fiscal é inválido.",d)}}),angular.module("arkabPortal").service("configStateService",[function(){var a={preparing:!0};this.getAppConfigState=function(){return a},this.setAppConfigState=function(b){a=b,a.preparing=!1}}]),angular.module("arkabPortal").service("appConfig",["configStateService",function(a){this.getAppConfig=function(){return a.getAppConfigState()}}]),angular.module("arkabPortal").service("fileUploadService",["$http",function(a){}]),angular.module("arkabPortal").factory("httpInterceptor",["$q","$location","$injector","appConfigKeys","urlConfig",function(a,b,c,d,e){var f={request:function(a){var b=a.url;if(b.indexOf(e.getUrlConfig().baseUrl)>=0){var d=c.get("identityService"),f=d.getUserIdentity().access_token;null!=f&&(a.headers.Authorization="Bearer "+f)}return a},response:function(a){return a},responseError:function(d){if(!isCordovaApp&&(401==d.status||d.status==-1)){var e=c.get("identityService"),f=c.get("$rootScope");e.resetUserData(),f.identity=e.getUserIdentity(),b.path("/login")}return a.reject(d)}};return f}]),angular.module("arkabPortal").service("identityService",["$http","appConfig","urlConfig","$q",function(a,b,c,d){var e={};this.logUserIn=function(b){var d="";try{d=clientPublicIP}catch(a){d=""}return b.ip=d,a({url:c.getUrlConfig().baseUrl.replace(/api\/$/,"token"),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",data:"grant_type=password&username="+b.userName+"&password="+b.password+"&lat="+b.latitude+"&lng="+b.longitude+"&ip="+b.ip})},this.resetUserData=function(){e={userName:"Visitante",isAuthenticated:!1,token:{}}},this.setUserData=function(a,b){b||(a.profitability="True"===a.profitability,a.inactives="True"===a.inactives,a.posts="True"===a.posts,a.controlpanel="True"===a.controlpanel,a.freight="True"===a.freight,a.bplid=parseInt(a.bplid),a.companyEmployee=parseInt(a.companyEmployee),a.companySlpCode=parseInt(a.companySlpCode),a.companyUserId=parseInt(a.companyUserid)),e=a},this.setUserAvatar=function(a){e.avatarStream=a},this.getUserIdentity=function(){return e},this.getUserInfo=function(){return a({url:c.getUrlConfig().baseUrl+"Account/UserInfo",method:"GET"})},this.isUserAuthehticated=function(){return $rootScope.identity.isAuthenticated},this.postAvatar=function(b){var d=new FormData;return d.append("file",b),a.post(c.getUrlConfig().baseUrl+"Account/PostAvatar",d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.postSignaturePicture=function(b){var d=new FormData;return d.append("file",b),a.post(c.getUrlConfig().baseUrl+"Account/PostSignaturePicture",d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.changePassword=function(b){return a({url:c.getUrlConfig().baseUrl+"Account/ChangePassword",
method:"PUT",data:b})},this.resetPassword=function(b){return a({url:c.getUrlConfig().baseUrl+"Account/ResetPassword",method:"PUT",data:b})},this.breakPassword=function(b){return a({url:c.getUrlConfig().baseUrl+"Account/BreakPassword",method:"PUT",data:b})},this.sendMail=function(b){return a({url:c.getUrlConfig().baseUrl+"Account/SendMail",method:"POST",data:b})},this.rememberPassword=function(b){return a({url:c.getUrlConfig().baseUrl+"Account/RememberPassword",method:"POST",data:b})},this.putUserSignature=function(b){return console.log(b),a({url:c.getUrlConfig().baseUrl+"Account/PutUserSignature",method:"PUT",data:b})},this.getUserSignature=function(){return a({url:c.getUrlConfig().baseUrl+"Account/GetUserSignature/",method:"GET"})},this.getUserBranches=function(){return a({url:c.getUrlConfig().baseUrl+"Account/GetUserBranches/",method:"GET"})},this.getCompanyInfo=function(){return a({url:c.getUrlConfig().baseUrl+"Account/GetCompanyInfo/",method:"GET"})},this.getUserSmtp=function(){return a({url:c.getUrlConfig().baseUrl+"Account/GetUserSmtp",method:"GET"})},this.putUserSmtp=function(b){return a({url:c.getUrlConfig().baseUrl+"Account/PutUserSmtp",method:"PUT",data:b})},this.canSelectWarehouse=function(){var a=!1;if(null==e.roles)return!1;try{$.each(b.getAppConfig().orderConfig.selectwarehouseroles,function(b,c){if(c.toUpperCase()==e.roles.toUpperCase())return a=!0,!1})}catch(a){return!1}return!!a},this.canUseOpportunities=function(){var a=!1;if(null==e.roles)return!1;try{$.each(b.getAppConfig().opportunities.roles,function(b,c){if(c.toUpperCase()==e.roles.toUpperCase())return a=!0,!1})}catch(a){return!1}return!!a},this.canSeeCalculatedFreight=function(){var a=!1;if(null==e.roles)return!1;if(!b.getAppConfig().orderConfig.calculateFreight)return!1;try{$.each(b.getAppConfig().orderConfig.calculatedFreightRolesVisible,function(b,c){if(c.toUpperCase()==e.roles.toUpperCase())return a=!0,!1})}catch(a){return!1}return!!a},this.canSeeForecast=function(){var a=!1;if(null==e.roles)return!1;if(!b.getAppConfig().orderConfig.forecast)return!1;try{$.each(b.getAppConfig().orderConfig.forecastRolesVisible,function(b,c){if(c.toUpperCase()==e.roles.toUpperCase())return a=!0,!1})}catch(a){return!1}return!!a},this.canEditCustomerSeller=function(){var a=!1;if(null==e.roles)return!1;if(!b.getAppConfig().customerConfig.editCustomerSellerRoles)return!1;try{$.each(b.getAppConfig().customerConfig.editCustomerSellerRoles,function(b,c){if(c.toUpperCase()==e.roles.toUpperCase())return a=!0,!1})}catch(a){return!1}return!!a},this.canEditCustomerStatus=function(){var a=!1;if(null==e.roles)return!1;if(!b.getAppConfig().customerConfig.editCustomerStatusRoles)return!1;try{$.each(b.getAppConfig().customerConfig.editCustomerStatusRoles,function(b,c){if(c.toUpperCase()==e.roles.toUpperCase())return a=!0,!1})}catch(a){return!1}return!!a},this.getWebAPPConfig=function(b){var e=d.defer();return a({url:c.getUrlConfig().baseUrl+"Adm/GetWebAPPConfig/"+b,method:"GET"}).error(function(a,b){console.log(a,b)}).success(function(a){e.resolve(a)}),e.promise},this.getWebAPPConfigAS=function(b){return a({url:c.getUrlConfig().baseUrl+"Adm/GetWebAPPConfig/"+b,method:"GET"})},this.putWebAPPConfig=function(b){return a({url:c.getUrlConfig().baseUrl+"Adm/PutWebAPPConfig",method:"PUT",data:b})},this.getWebAPIConfig=function(){return a({url:c.getUrlConfig().baseUrl+"Adm/GetWebAPIConfig",method:"GET"})},this.getWebAPIConfigByDomain=function(b){return a({url:c.getUrlConfig().baseUrl+"Adm/GetWebAPIConfig/"+b,method:"GET"})},this.putWebAPIConfig=function(b){return a({url:c.getUrlConfig().baseUrl+"Adm/PutWebAPIConfig",method:"PUT",data:b})},this.getUsersChat=function(){return a({url:c.getUrlConfig().baseUrl+"Chat/GetUsers",method:"GET"})},this.postImage=function(b){var d=new FormData;return d.append("file",b),a.post(c.getUrlConfig().baseUrl+"Account/PostImage",d,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.postCarrierImage=function(b,d){var e=new FormData;return e.append("file",d),a.post(c.getUrlConfig().baseUrl+"Adm/PostCarrierImage/"+b,e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.getImages=function(){return a({url:c.getUrlConfig().baseUrl+"Account/GetImages",method:"GET"})},this.register=function(b,d,e){var f={Email:b,Password:d,ConfirmPassword:d,Company:e};return a({url:c.getUrlConfig().baseUrl+"Account/Register",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},data:f,method:"POST"})},this.postDevice=function(b){return a({url:c.getUrlConfig().baseUrl+"Adm/PostDevice",method:"POST",data:b})},this.getIndustryPermissions=function(){return a({url:c.getUrlConfig().baseUrl+"Account/GetIndustryPermissions",method:"GET"})}}]),angular.module("arkabPortal").service("industryService",["$http","urlConfig","$q",function(a,b,c){this.getPermissions=function(){return a({url:b.getUrlConfig().baseUrl+"Industry/GetPermissions",method:"GET"})},this.getUserPermissions=function(c){return a({url:b.getUrlConfig().baseUrl+"Industry/GetUserPermissions/"+c,method:"GET"})},this.putPermission=function(c){return a({url:b.getUrlConfig().baseUrl+"Industry/PutPermission",method:"PUT",data:c})},this.getProductMRP=function(){return a({url:b.getUrlConfig().baseUrl+"Industry/MRP/Products",method:"GET"})},this.postWorkOrders=function(c){return a({url:b.getUrlConfig().baseUrl+"Industry/PostWorkOrders",method:"POST",data:{oplist:c}})},this.postWorkOrder=function(c){return a({url:b.getUrlConfig().baseUrl+"Industry/PostWorkOrder",method:"POST",data:c})},this.getWorkingOrderIntegrationStatus=function(c){return a({url:b.getUrlConfig().baseUrl+"Industry/GetWorkingOrderIntegrationStatus/"+c,method:"GET"})},this.getMaterialMRP=function(){return a({url:b.getUrlConfig().baseUrl+"Industry/MRP/Materials",method:"GET"})},this.getScenarios=function(){return a({url:b.getUrlConfig().baseUrl+"Industry/MRP/Scenarios",method:"GET"})},this.getMRPWarehouses=function(c){return a({url:b.getUrlConfig().baseUrl+"Industry/MRP/Warehouses/"+c,method:"GET"})},this.getRecommendations=function(c){var d=angular.copy(c);return d.startdate&&(d.startdate=formatPtBrDate(d.startdate)),d.enddate&&(d.enddate=formatPtBrDate(d.enddate)),a({url:b.getUrlConfig().baseUrl+"Industry/MRP/GetRecommendations",method:"POST",data:d})}}]),angular.module("arkabPortal").service("lcqService",["$http","urlConfig","$q",function(a,b,c){this.getPermissions=function(){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetPermissions",method:"GET"})},this.getUserPermissions=function(c){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetUserPermissions/"+c,method:"GET"})},this.putPermission=function(c){return a({url:b.getUrlConfig().baseUrl+"LCQ/PutPermission",method:"PUT",data:c})},this.getFichaLCQ=function(c){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetFichaLCQ/"+c,method:"GET"})},this.getListaFichas=function(c){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetListaFichas",method:"POST",data:c})},this.getTipoAnaliseList=function(c){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetTipoAnaliseList",method:"GET"})},this.getStatusLoteList=function(){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetStatusLoteList",method:"GET"})},this.getUserStatusLoteList=function(){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetUserStatusLoteList",method:"GET"})},this.getStatusLoteUsersList=function(){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetStatusLoteUsersList",method:"GET"})},this.postStatusLoteUser=function(c,d){return a({url:b.getUrlConfig().baseUrl+"LCQ/PostStatusLoteUser/"+c+"/"+d,method:"POST"})},this.deleteStatusLoteUser=function(c,d){return a({url:b.getUrlConfig().baseUrl+"LCQ/DeleteStatusLoteUser/"+c+"/"+d,method:"DELETE"})},this.putFichaLCQ=function(c){return a({url:b.getUrlConfig().baseUrl+"LCQ/PutFichaLCQ",method:"PUT",data:c})},this.getFichaLCQIntegrationStatus=function(c){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetFichaLCQIntegrationStatus/"+c,method:"GET"})},this.postFichaLCQEtiquetas=function(c){return a({url:b.getUrlConfig().baseUrl+"LCQ/PostFichaLCQEtiquetas",method:"POST",data:c})},this.getIndicadoresLCQ=function(){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetIndicadoresLCQ",method:"GET"})},this.postAttachment=function(c,d){var e=new FormData;return e.append("file",d),a.post(b.getUrlConfig().baseUrl+"LCQ/PostFichaLCQAttachment?docentry="+c+"&filename="+d.name,e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},this.deleteFichaLCQAttachment=function(c){return a({url:b.getUrlConfig().baseUrl+"LCQ/DeleteFichaLCQAttachment/"+c,method:"DELETE"})},this.getCertificatePDF=function(c){return a({url:b.getUrlConfig().baseUrl+"LCQ/GetCertificatePDF?code="+c,method:"GET",responseType:"arraybuffer"})}}]),angular.module("arkabPortal").service("logService",["$http","appConfig","urlConfig",function(a,b,c){this.info=function(a,c){b.getAppConfig().development&&(c?console.info(a,c):console.info(a))},this.xhrerror=function(a,c,d){b.getAppConfig().development&&console.error("XHR "+a+" returned code "+d,c)},this.error=function(a,c){b.getAppConfig().development&&(c?console.error(a,c):console.error(a))}}]),angular.module("arkabPortal").service("stateService",["$http","appConfig","identityService","appConfigComponents","urlConfig",function(a,b,c,d,e){var f=new Date,g=(new Date(f.getFullYear(),f.getMonth(),1),new Date(f.getFullYear(),f.getMonth()+1,0),"01/"+((new Date).getMonth()+1<10?"0":"")+((new Date).getMonth()+1)+"/"+(new Date).getFullYear(),new Date((new Date).getFullYear(),(new Date).getMonth()+1,0).getDate()+"/"+((new Date).getMonth()+1<10?"0":"")+((new Date).getMonth()+1)+"/"+(new Date).getFullYear(),formatDateToPtBr(addDays(new Date,-364))),h=formatDateToPtBr(new Date),i=(new Date).getMonth()+1,j=(new Date).getFullYear(),k=i-1,l=j;0==k&&(k=12,l-=1);var m={view:"waiting"},n={params:{status:"Aberto"},report:null,daterangeoptions:{ranges:{Hoje:[moment(),moment()],Ontem:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Últimos 7 dias":[moment().subtract(6,"days"),moment()],"Últimos 30 dias":[moment().subtract(29,"days"),moment()],"Mês passado":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]}}},o={params:{startdate:moment().subtract(29,"days"),enddate:moment(),docnum:"",quotations:!0,orders:!0,invoices:!0,slpcode:parseInt(c.getUserIdentity().companySlpCode),attendant:parseInt(c.getUserIdentity().companyEmployee),daterangeoptions:angular.copy(d.daterangeoptions)},documents:null},p={params:{month:k,year:l},report:null},q={customers:null,params:{type:"Regular",slpcode:parseInt(c.getUserIdentity().companySlpCode)}},r={report:null,params:{year:f.getFullYear(),teamid:0},message:"",config:b.getAppConfig().monitorConfig},s={report:null,params:{year:f.getFullYear(),month:f.getMonth()+1},message:""},t={report:null,params:{year:f.getFullYear(),month:f.getMonth()+1},message:""};this.reset=function(){},this.setLcqState=function(a){n=a},this.getLcqState=function(){return n},this.setCampaingTrackingState=function(a){t=a},this.getCampaingTrackingState=function(){return t},this.setRevenueByProductLineState=function(a){s=a},this.getRevenueByProductLineState=function(){return s},this.setProgressionState=function(a){r=a},this.getProgressionState=function(){return r},this.setSalesState=function(a,b){o.params=a,o.documents=b},this.getSalesState=function(){return o},this.setCommissionState=function(a,b){p.params=a,p.report=b},this.getCommissionState=function(){return p},this.setCustomersListState=function(a,b){q.customers=a,q.type=b},this.getCustomersListState=function(){return q},this.getWorkflowViewState=function(){return m.view},this.setWorkflowViewState=function(a){m.view=a},this.getStartingAnnualPeriod=function(){return{firstAnnualDay:g,lastAnnualDay:h}};var u=[],v=[];this.getExchangeRates=function(){return u},this.setExchangeRates=function(a){u=a},this.getLastExchangeRate=function(){return v},this.setLastExchangeRate=function(a){v=a}}]),angular.module("arkabPortal").service("thermometerService",["$http","urlConfig","$q",function(a,b,c){this.getTemperature=function(c){return a({url:b.getUrlConfig().baseUrl+"Thermometer/GetTemperature/"+c,method:"GET"})},this.getTemperaturePerHour=function(c){return a({url:b.getUrlConfig().baseUrl+"Thermometer/GetTemperaturePerHour/"+c,method:"GET"})},this.getThermometers=function(){return a({url:b.getUrlConfig().baseUrl+"Thermometer/GetThermometers",method:"GET"})},this.getThermometer=function(c){return a({url:b.getUrlConfig().baseUrl+"Thermometer/GetThermometer/"+c,method:"GET"})},this.putThermometer=function(c){return a({url:b.getUrlConfig().baseUrl+"Thermometer/PutThermometer",method:"PUT",data:c})},this.getTemperatures=function(c){return a({url:b.getUrlConfig().baseUrl+"Thermometer/GetTemperatures/"+c,method:"GET"})}}]);