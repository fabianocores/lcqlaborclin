angular.module("arkabPortal").run(["$rootScope","$location","identityService","blackLists","appConfig","appConfigKeys","$window","urlConfig","configStateService",function(a,b,c,d,e,f,g,h,i){function j(){if(f.googleAnalyticsKey&&h.getUrlConfig().googleAnalyticsChild){f.googleAnalyticsKey+"-"+h.getUrlConfig().googleAnalyticsChild}a.$on("$routeChangeStart",function(d,e,f){$("#notificationContainer").fadeOut("fast");var g=b.$$path;"/order/pdf/"==g.substring(0,11)&&(g="/order/pdf/");var h=$.inArray(g,k)>-1;if(h||(a.requested_url=g),a.identity.isAuthenticated){var i=c.getUserIdentity().roles;if(c.getUserIdentity().reseller,null!=i&&"/"!=g){if(!c.getUserIdentity().controlpanel&&"/adm"==g.substring(0,4))return b.path("/404"),!1;"REPRESENTANTE"!=i.toUpperCase()&&"VENDEDOR"!=i.toUpperCase()&&"REVENDA"!=i.toUpperCase()||$.each(l,function(a,c){if("path"==c.option){if(g.toUpperCase()==c.path.toUpperCase())return b.path("/404"),!1}else if(g.toUpperCase().indexOf(c.path.toUpperCase())!=-1)return b.path("/404"),!1}),"REVENDA"==i.toUpperCase()&&$.each(m,function(a,c){if("path"==c.option){if(g.toUpperCase()==c.path.toUpperCase())return b.path("/404"),!1}else if(g.toUpperCase().indexOf(c.path.toUpperCase())!=-1)return b.path("/404"),!1})}}else{var j=$.inArray(g,k)>-1;if(!j||"/"==g)return void b.path("/login")}})}var k=["/login","/remember","/order/pdf/","/setup"],l=d.representativesBlackList,m=d.resellersBlackList;a.identity={userName:"Visitante",isAuthenticated:!1,token:{}},a.requested_url="",j()}]);