<div class="container">

    <!--<akb-title page-title="Dados do usuário" page-subtitle=""></akb-title>
    <div class="row">
        <div class="col-md-12">
            <small>
                <a href="#/adm">Painel de controle</a> | <a href="#/adm/users">Usuários</a> | <a href="#/adm/userprofile" ng-if="!params.user.userid">Novo usuário</a><a ng-href="#/adm/user/{{params.user.userid}}" ng-if="params.user.userid">{{params.user.username}}</a>
            </small>
        </div>
    </div>
    <br />-->

    <ol class="breadcrumb">
        <li><a href="#/adm">Painel de controle</a></li>
        <li class="active" ng-if="!params.user.userid"><a href="#/adm/newuser">Novo usuário</a></li>
        <li class="active" ng-if="params.user.userid"><a href="#/adm/user/{{params.user.userid}}">{{params.user.username}}</a></li>
    </ol>

    <div class="row">
        <div class="col-sm-12">

            <div class="form-horizontal">
                <div class="form-group">
                    <label for="userid" class="col-md-2 control-label">
                        ID
                    </label>
                    <div class="col-md-2">
                        <label id="mail" class="control-label">{{params.user.userid}}</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="userid" class="col-md-2 control-label">
                        Nome usuário
                    </label>
                    <div class="col-md-2">
                        <!--<label id="mail" class="control-label">{{params.user.usercode}}</label>-->
                        <input type="text" id="userid" class="form-control input-sm" ng-model="params.user.usercode" ng-disabled="params.userid || params.saving || params.loading" maxlength="25" />
                    </div>
                </div>

                <div class="form-group">
                    <label for="userid" class="col-md-2 control-label">
                        Nome completo
                    </label>
                    <div class="col-md-4">
                        <input type="text" id="userid" class="form-control input-sm" ng-model="params.user.username" ng-disabled="params.saving || params.loading" />
                    </div>

                </div>

                <div class="form-group">
                    <label for="userid" class="col-md-2 control-label">
                        E-mail
                    </label>
                    <div class="col-md-4">
                        <input type="text" id="userid" class="form-control input-sm" ng-model="params.user.email" ng-disabled="params.userid || params.saving || params.loading" />
                    </div>
                    <div class="col-md-6" ng-if="!params.userid">
                        <button class="btn btn-sm btn-success" ng-click="params.getEmailSuggestion()">Sugerir e-mail (somente se o usuário não possui e-mail)</button>
                        <!--<label class="label label-info">Este será o e-mail utilizado para login</label>-->
                    </div>
                </div>

                <div class="form-group">
                    <label for="userid" class="col-md-2 control-label">
                        Celular
                    </label>
                    <div class="col-md-2">
                        <input type="text" id="userid" class="form-control input-sm" ng-model="params.user.mobile" ng-disabled="params.saving || params.loading" />
                    </div>

                </div>

                <div class="form-group">
                    <label for="userid" class="col-md-2 control-label">
                        Data de nascimento
                    </label>
                    <div class="col-md-2">
                        <input akbdatepicker id="birthdate" class="form-control input-sm" ng-model="params.user.birthdate" ng-disabled="params.saving || params.loading" />
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="userid" class="col-md-2 control-label">
                        Perfil
                    </label>
                    <div class="col-md-4">
                        <select class="form-control input-sm" ng-model="params.user.roleid" placeholder="Selecione um perfil"
                                id="slpcode" ng-options="r.code as r.name for r in params.roles"
                                ng-disabled="params.saving || params.loading"></select>
                    </div>
                </div>

                <div class="form-group" ng-if="params.user.userid">
                    <label for="userid" class="col-md-2 control-label">
                        API
                    </label>
                    <div class="col-md-1">
                        <button class="btn btn-default btn-sm" ng-if="!params.user.api" ng-click="params.register()">
                            <span class="fa fa-check" aria-hidden="true"></span> Registrar
                        </button>
                    </div>
                    <div class="col-md-8 col-xs-7">
                        <label id="mail" class="control-label"> <span class="fa fa-check fa-2x text-success" aria-hidden="true" ng-if="params.user.api"></span></label>
                    </div>
                </div>

                <div class="form-group" ng-if="params.user.userid && params.user.api">
                    <label for="userid" class="col-md-2 control-label">
                        Licença
                    </label>
                    <div class="col-md-1">
                        <div ng-disabled="!params.user.api">

                            <span class="fa fa-toggle-off fa-2x text-muted" aria-hidden="true"
                                  ng-click="params.putUserLicense()" ng-if="!params.user.license"
                                  style="cursor: pointer"></span>

                            <span class="fa fa-toggle-on fa-2x text-primary" aria-hidden="true"
                                  ng-click="params.removeUserLicense()" ng-if="params.user.license"
                                  style="cursor: pointer"></span>

                        </div>
                    </div>
                    <div class="col-md-8">
                        <label id="mail" class="control-label"> <span class="fa fa-check fa-2x text-success" aria-hidden="true" ng-if="params.user.license"></span></label>
                    </div>
                </div>

            </div>





        </div>

    </div>
    <div class="row">
        <div class="col-md-9 col-md-offset-2">
            <button class="btn btn-success" ng-click="params.save()" ng-hide="params.saving || params.loading">
                <span class="fa fa-check" aria-hidden="true"></span>
                Salvar usuário
            </button>
            <akb-server-loading ng-show="params.saving"></akb-server-loading>
            <div class="alert alert-danger" ng-if="params.message">
                <strong>Erro </strong>{{params.message}}
            </div>
        </div>
    </div>

    <!--<pre>{{params.user}}</pre>
    <pre>{{params.roles}}</pre>
    <pre>{{params.teams}}</pre>-->

</div>

