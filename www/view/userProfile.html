<div class="container">
    <h3 style="margin-top: 0px;" class="georgiaFont">{{identity.companyUserName}} <small>{{identity.roles}} | {{identity.teamsname}}</small></h3>
    <div class="row">
        <div class="col-sm-3 hidden-xs">
            
            <div class="form-group">
                <img ng-src="{{userProfile.apiurl}}Account/GetAvatar/{{identity.avatarStream}}-256px" class="img img-responsive img-rounded">
            </div>
            <div class="form-group">
                <img ng-src="{{userProfile.apiurl}}Account/GetSignaturePicture/{{identity.signature.picture}}" class="img img-responsive" ng-if="identity.signature.picture">
            </div>

            <div class="form-group" ng-if="identity.signature.signature">
                <p ng-bind-html="identity.signature.signature"></p>
            </div>
            <div class="form-group">
                <img ng-src="{{userProfile.apiurl}}Adm/GetLogo/{{appConfig.logo}}-256px" class="img img-responsive" /><br />
            </div>


        </div>
        <div class="col-sm-9 col-xs-12 form-horizontal">

            <div class="btn-group btn-group-justified" role="group">
                <div class="btn-group">
                    <button class="btn btn-sm" ng-class="{'btn-primary': userProfileView == 'userInfo', 'btn-default': userProfileView != 'userInfo' }" ng-click="changeView('userInfo')">Info</button>
                </div>
                <div class="btn-group">
                    <button class="btn btn-sm" ng-class="{'btn-primary': userProfileView == 'changePicture', 'btn-default': userProfileView != 'changePicture' }" ng-click="changeView('changePicture')">Imagem</button>
                </div>
                <div class="btn-group">
                    <button class="btn btn-sm" ng-class="{'btn-primary': userProfileView == 'userSignature', 'btn-default': userProfileView != 'userSignature' }" ng-click="changeView('userSignature')" ng-if="!identity.reseller">Assinatura</button>
                </div>
                <div class="btn-group">
                    <button class="btn btn-sm" ng-class="{'btn-primary': userProfileView == 'userSmtp', 'btn-default': userProfileView != 'userSmtp' }" ng-click="changeView('userSmtp')" ng-if="!identity.reseller">SMTP</button>
                </div>
                <div class="btn-group">
                    <button class="btn btn-sm" ng-class="{'btn-primary': userProfileView == 'changePassword', 'btn-default': userProfileView != 'changePassword' }" ng-click="changeView('changePassword')">Senha</button>
                </div>

            </div>
            <br />
            <div class="form-horizontal">
                <div ng-show="userProfileView == 'userInfo'">
                    <div class="form-group">
                        <label for="email" class="col-xs-3 control-label">Domínio</label>
                        <div class="col-xs-9">
                            <p for="email" class="form-control-static">{{identity.company}}</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email" class="col-xs-3 control-label">E-mail</label>
                        <div class="col-xs-9">
                            <p for="email" class="form-control-static">{{identity.userName}}</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email" class="col-xs-3 control-label">Perfil</label>
                        <div class="col-xs-9">
                            <p for="email" class="form-control-static">{{identity.roles}}</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email" class="col-xs-3 control-label">Equipes</label>
                        <div class="col-xs-9">
                            <p for="email" class="form-control-static">{{identity.teamsname}}</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email" class="col-xs-3 control-label">Revenda</label>
                        <div class="col-xs-9">
                            <p for="email" class="form-control-static">{{identity.reseller}} {{identity.resellerName}}</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email" class="col-sm-3 control-label">Assinatura</label>
                        <div class="col-sm-9">
                            <p ng-bind-html="identity.signature.signature"></p>
                        </div>
                    </div>
    
                </div>

                <div ng-show="userProfileView == 'changePicture'">

                    <img ng-src="{{userProfile.apiurl}}Account/GetAvatar/{{identity.avatarStream}}-256px" class="img img-responsive img-rounded visible-xs">

                    <div class="form-group">
                        <label for="password2" class="col-sm-3 control-label">Selecionar imagem</label>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <input type="file" class="form-control input-sm fileupload" id="file" file-model="userProfile.avatar">
                                <div class="input-group-btn">
                                    <button class="btn btn-sm btn-primary" ng-click="postAvatar()">
                                        <span class="glyphicon glyphicon-send" aria-hidden="true"></span>
                                        Enviar
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                    </div>

                    <div class="form-group">
                        <div class="col-sm-3 col-sm-offset-2">
                            {{avatarMessage}}
                        </div>

                    </div>
                </div>

                <div ng-show="userProfileView == 'changePassword'">

                    <div class="form-group">
                        <label for="OldPassword" class="col-sm-3 control-label">Senha atual</label>
                        <div class="col-sm-3">
                            <input type="password" class="form-control" id="oldpassword" ng-model="changePasswordModel.OldPassword" placeholder="Senha anterior">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password1" class="col-sm-3 control-label">Nova senha</label>
                        <div class="col-sm-3">
                            <input type="password" class="form-control" id="password1" ng-model="changePasswordModel.NewPassword" placeholder="Nova senha">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password2" class="col-sm-3 control-label">Confirme a senha</label>
                        <div class="col-sm-3">
                            <input type="password" class="form-control" id="password2" ng-model="changePasswordModel.ConfirmPassword" placeholder="Repita a senha">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-3 col-sm-3">
                            <button type="button" ng-click="changePassword()" class="btn btn-primary btn-block">
                                <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                                Alterar senha
                            </button>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3 col-sm-offset-2">
                            <img src="img/loading.gif" alt="Carregando, aguarde..." title="Carregando, aguarde..." ng-if="changePasswordLoading" />
                            {{changePasswordMessage}}
                        </div>

                    </div>
                </div>

                <div ng-show="userProfileView == 'userSignature'">
                    
                    <!--<div ckeditor="options" ng-model="identity.signature" ready="onReady()"></div>-->
                    <textarea ng-model="identity.signature.signature" rows="10" class="form-control input-sm"></textarea>
                    <br />

                    <span ng-bind-html="identity.signature.signature"></span>

                    <br />
                    <button class="btn btn-primary" ng-click="putUserSignature()">
                        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                        Salvar
                    </button>

                    <hr />

                    <h4>Assinatura para certificado</h4>

                    <img ng-src="{{userProfile.apiurl}}Account/GetSignaturePicture/{{identity.signature.picture}}" class="img img-responsive" style="max-height: 180px;" ng-if="identity.signature.picture">
                    <br />
                    <div class="form-group">
                        <label for="password2" class="col-sm-3 control-label">Selecionar imagem</label>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <input type="file" class="form-control input-sm fileupload" id="file" file-model="userProfile.avatar">
                                <div class="input-group-btn">
                                    <button class="btn btn-sm btn-primary" ng-click="postSignaturePicture()">
                                        <span class="glyphicon glyphicon-send" aria-hidden="true"></span>
                                        Enviar
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="form-group">
                        <div class="col-sm-3 col-sm-offset-2">
                            {{signaturePictureMessage}}
                        </div>

                    </div>

                </div>

                <div ng-show="userProfileView == 'userSmtp'">
                    <div class="form-horizontal">

                        <div class="form-group">
                            <label for="email" class="col-sm-3 control-label">E-mail</label>
                            <div class="col-sm-6">
                                <input type="email" class="form-control" id="email" ng-model="userSmtp.email">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="nome" class="col-sm-3 control-label">Nome para exibição</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="nome" ng-model="userSmtp.nome">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="smtp_host" class="col-sm-3 control-label">Servidor SMTP</label>
                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="smtp_host" ng-model="userSmtp.smtp_host" placeholder="ex.: smtp.servidor.com.br">
                            </div>
                            <label for="smtp_host" class="col-sm-1 control-label">Porta</label>
                            <div class="col-sm-2">
                                <input type="number" class="form-control" id="smtp_port" ng-model="userSmtp.smtp_port" placeholder="ex.: 443">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-10">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" ng-model="userSmtp.smtp_auth"> O servidor precisa de autenticação
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="username" class="col-sm-3 control-label">Usuário</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="username" ng-model="userSmtp.username">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="username" class="col-sm-3 control-label">Senha</label>
                            <div class="col-sm-3">
                                <input type="password" class="form-control" id="password" ng-model="userSmtp.password">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-10">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" ng-model="userSmtp.smtp_spa"> Utilizar SPA
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-10">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" ng-model="userSmtp.smtp_ssl"> Utilizar SSL
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-2">
                                <button class="btn btn-primary" ng-click="putUserSmtp()">
                                    <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                                    Salvar
                                </button>
                            </div>
                            <div class="col-sm-6">
                                {{smtpMessage}}
                            </div>
                        </div>


                    </div>
                </div>

            </div>
        </div>
    </div>
    
</div>
